<!doctype html><html><head><title>Configure and manage Windows Server file shares</title><base href="../../../../../"><meta id="root-path" root-path="../../../../../"><link rel="icon" sizes="96x96" href="https://publish-01.obsidian.md/access/f786db9fac45774fa4f0d8112e232d67/favicon-96x96.png"><meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes,minimum-scale=1,maximum-scale=5"><meta charset="UTF-8"><link rel="stylesheet" href="lib/styles/obsidian-styles.css"><link rel="stylesheet" href="lib/styles/theme.css"><link rel="stylesheet" href="lib/styles/plugin-styles.css"><link rel="stylesheet" href="lib/styles/snippets.css"><link rel="stylesheet" href="lib/styles/generated-styles.css"><style></style><script src="lib/scripts/webpage.js"></script><script src="lib/scripts/generated.js"></script></head><body class="theme-dark show-inline-title mk-folder-lines mk-spaces-enabled mk-inline-context-enabled mk-flow-replace mk-flow-seamless loading"><div class="webpage-container"><div class="sidebar-left sidebar"><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="tree-container file-tree mod-nav-indicator" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Hinok's Knowledge Library</span><button class="clickable-icon collapse-tree-button is-collapsed"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Home</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Information Technology</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">System Administration</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Windows Server</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-folder mod-collapsible is-collapsed" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title">Azure-800</span></a></div><div class="tree-item-children" style="display:none"><div class="tree-item mod-tree-file" data-depth="6"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="home/information-technology/system-administration/windows-server/azure-800/configure-and-manage-windows-server-file-shares.html"><span class="tree-item-title">Configure and manage Windows Server file shares</span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div></div><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div></div><div class="document-container show"><div class="markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings show-indentation-guide allow-fold-lists show-properties" tabindex="-1" style="tab-size:4"><style id="MJX-CHTML-styles"></style><div class="markdown-preview-sizer markdown-preview-section" style="min-height:148678px"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div><div class="mod-header"><div class="mk-inline-context" data-path="Home/Information Technology/System Administration/Windows Server/Azure-800/Configure and manage Windows Server file shares.md"><div><div class="mk-file-context-component"><div class="mk-file-context-file"><div class="mk-file-icon"><button aria-label="Change Sticker" style="--icon-color:var(--text-muted)"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path></svg></button></div><div class="mk-inline-title inline-title" contenteditable="false">Configure and manage Windows Server file shares</div><div class="mk-collapse mk-icon-xsmall mk-fold"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"></path></svg></div></div><div style="height:16px"></div></div><div class="mk-file-context-properties"></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Theory" class="heading" id="Theory"><div class="heading-before"></div>Theory<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="Configure Windows Server file share access" class="heading" id="Configure_Windows_Server_file_share_access"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configure Windows Server file share access<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Understanding File Systems" class="heading" id="Understanding_File_Systems"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Understanding File Systems<div class="heading-after">...</div></h3><div class="heading-children"><div class="heading-wrapper"><h4 data-heading="Definition and Role of a File System" class="heading" id="Definition_and_Role_of_a_File_System"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Definition and Role of a File System<div class="heading-after">...</div></h4><div class="heading-children"><div><p>A file system is an essential component in the management of data on storage devices. It enables the storage, retrieval, organization, and naming of files in a hierarchical structure. This structure accommodates a broad range of storage devices, from hard disks to removable media, facilitating efficient data handling and access.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Components of Windows File Systems" class="heading" id="Components_of_Windows_File_Systems"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Components of Windows File Systems<div class="heading-after">...</div></h4><div class="heading-children"><div><p>Windows operating systems utilize three primary storage components within their file systems:</p></div><div><ol><li data-line="0"><strong>Files</strong>: These are the fundamental units of storage, representing a logical grouping of related data.</li><li data-line="1"><strong>Directories</strong>: Serving as organizational units, directories allow the hierarchical arrangement of files and other directories.</li><li data-line="2"><strong>Volumes</strong>: A volume encompasses a collection of directories and files, representing the entirety of the storage structure on a disk or partition.</li></ol></div></div></div><div class="heading-wrapper"><h4 data-heading="Windows Server File System Types" class="heading" id="Windows_Server_File_System_Types"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Windows Server File System Types<div class="heading-after">...</div></h4><div class="heading-children"><div class="heading-wrapper"><h5 data-heading="File Allocation Table (FAT) Variants" class="heading" id="File_Allocation_Table_(FAT)_Variants"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>File Allocation Table (FAT) Variants<div class="heading-after">...</div></h5><div class="heading-children"><div class="heading-wrapper"><h6 data-heading="FAT, FAT32, and exFAT Overview" class="heading" id="FAT,_FAT32,_and_exFAT_Overview"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>FAT, FAT32, and exFAT Overview<div class="heading-after">...</div></h6><div class="heading-children"><div><ul><li data-line="0"><strong>FAT</strong>: The File Allocation Table (FAT) system is the oldest and simplest file system supported by Windows. It utilizes a table at the volume level to track file locations, maintaining two copies for resilience. FAT is limited to volumes no larger than 4 GB.</li><li data-line="1"><strong>FAT32</strong>: An extension of FAT, FAT32 supports larger volumes, up to 64 GB, making it more suitable for modern storage requirements.</li><li data-line="2"><strong>exFAT</strong>: Designed primarily for flash drives, exFAT can handle even larger volumes, surpassing the limitations of FAT32. It is commonly used with modern media devices like TVs and portable players.</li></ul></div></div></div><div class="heading-wrapper"><h6 data-heading="Limitations and Applications" class="heading" id="Limitations_and_Applications"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Limitations and Applications<div class="heading-after">...</div></h6><div class="heading-children"><div><ul><li data-line="0"><strong>Security Features</strong>: Neither FAT nor FAT32 offers file-level security, making them less suitable for server environments. However, for external media like USB drives, these systems are often utilized.</li><li data-line="1"><strong>Encryption Support</strong>: Starting with Windows Server 2016, FAT and FAT32 have incorporated support for Encrypting File System (EFS).</li></ul></div></div></div></div></div></div></div><div class="heading-wrapper"><h4 data-heading="NT File System (NTFS)" class="heading" id="NT_File_System_(NTFS)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>NT File System (NTFS)<div class="heading-after">...</div></h4><div class="heading-children"><div class="heading-wrapper"><h5 data-heading="Characteristics and Benefits" class="heading" id="Characteristics_and_Benefits"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Characteristics and Benefits<div class="heading-after">...</div></h5><div class="heading-children"><div><p>NTFS is a prevalent choice for Windows Server operating systems, offering significant improvements over FAT systems. These improvements include:</p></div><div><ul><li data-line="0"><strong>Advanced Data Structures</strong>: Enhanced performance, reliability, and efficient disk space usage.</li><li data-line="1"><strong>Security Features</strong>: In-built security mechanisms like access control lists (ACLs), file-system journaling, and encryption.</li><li data-line="2"><strong>Other Capabilities</strong>: NTFS supports file system compression and encryption (though not simultaneously) and is essential for various Windows Server roles and features.</li></ul></div></div></div></div></div><div class="heading-wrapper"><h4 data-heading="Resilient File System (ReFS)" class="heading" id="Resilient_File_System_(ReFS)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Resilient File System (ReFS)<div class="heading-after">...</div></h4><div class="heading-children"><div class="heading-wrapper"><h5 data-heading="Introduction and Advantages" class="heading" id="Introduction_and_Advantages"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Introduction and Advantages<div class="heading-after">...</div></h5><div class="heading-children"><div><ul><li data-line="0"><strong>Enhanced Resiliency</strong>: ReFS, introduced in Windows Server 2012, is designed to provide greater data corruption resilience and remediation capabilities.</li><li data-line="1"><strong>Support for Large Files and Volumes</strong>: It supports significantly larger file and volume sizes, including deduplication.</li></ul></div></div></div><div class="heading-wrapper"><h5 data-heading="Limitations and Recommended Usage" class="heading" id="Limitations_and_Recommended_Usage"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Limitations and Recommended Usage<div class="heading-after">...</div></h5><div class="heading-children"><div><ul><li data-line="0"><strong>Feature Parity with NTFS</strong>: ReFS lacks some NTFS features like file-level compression and encryption, and it's not recommended for boot volumes or removable media.</li><li data-line="1"><strong>Optimal Use Case</strong>: ReFS is ideal for data volumes in servers, especially in the latest Windows Server versions.</li></ul></div></div></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="Disk Formatting: Sectors and Allocation Units" class="heading" id="Disk_Formatting:_Sectors_and_Allocation_Units"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Disk Formatting: Sectors and Allocation Units<div class="heading-after">...</div></h3><div class="heading-children"><div class="heading-wrapper"><h4 data-heading="Understanding Sectors" class="heading" id="Understanding_Sectors"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Understanding Sectors<div class="heading-after">...</div></h4><div class="heading-children"><div><p>A sector is the smallest unit of data storage on a hard drive, traditionally fixed at 512 bytes. Modern drives may use larger sector sizes, such as 1 KB, 2 KB, or 4 KB.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Allocation Units Explained" class="heading" id="Allocation_Units_Explained"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Allocation Units Explained<div class="heading-after">...</div></h4><div class="heading-children"><div><p>During formatting, sectors are grouped into allocation units or clusters. These units represent the smallest disk space segment that can hold a file, influenced by the file system's formatting. The choice of cluster size impacts disk space efficiency and performance, with larger clusters generally reducing the number of required disk operations but potentially leading to space inefficiencies.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Optimal Allocation Unit Size" class="heading" id="Optimal_Allocation_Unit_Size"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Optimal Allocation Unit Size<div class="heading-after">...</div></h4><div class="heading-children"><div><p>For optimal performance, the allocation unit size should match the typical file or record size used. For instance, a database with 8,192-byte records would benefit from an 8 KB allocation unit size, allowing complete records to be written in a single unit.</p></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="Shared Folders" class="heading" id="Shared_Folders"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Shared Folders<div class="heading-after">...</div></h3><div class="heading-children"><div class="heading-wrapper"><h4 data-heading="Overview of Shared Folders" class="heading" id="Overview_of_Shared_Folders"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Overview of Shared Folders<div class="heading-after">...</div></h4><div class="heading-children"><div><p>Shared folders are an essential component in a networked environment, particularly within organizational settings. They function as a centralized location on a file server where members of a designated group, such as a department, can store and access files. The primary purpose of shared folders is to facilitate easy sharing and collaboration among group members.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Role of Permissions in Shared Folders" class="heading" id="Role_of_Permissions_in_Shared_Folders"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Role of Permissions in Shared Folders<div class="heading-after">...</div></h4><div class="heading-children"><div><p>Permissions play a crucial role in managing access to shared folders. They determine not only who can access these folders but also the extent of control users have over the files within them. Permissions can be set to allow read-only access or to enable users to create, edit, and delete files.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Applying Share and File System Permissions" class="heading" id="Applying_Share_and_File_System_Permissions"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Applying Share and File System Permissions<div class="heading-after">...</div></h4><div class="heading-children"><div><p>When setting up shared folders, administrators typically configure both share permissions and file system permissions. The key rule here is that the most restrictive permissions between these two types take precedence. For example, if share permissions grant full control to all users, but file system permissions only allow read access for a specific group, then members of that group will only have read access when accessing the folder over the network.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Handling Multiple Group Memberships" class="heading" id="Handling_Multiple_Group_Memberships"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Handling Multiple Group Memberships<div class="heading-after">...</div></h4><div class="heading-children"><div><p>The situation becomes more complex when users belong to multiple groups with different permission levels. In such cases, the most permissive rights available to any of the groups a user belongs to will apply. For instance, if a user is part of both the Domain Users group, which has read access, and the Managers group, which has full control, the user will inherit full control permissions.</p></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="Methods for Creating and Managing Shared Folders" class="heading" id="Methods_for_Creating_and_Managing_Shared_Folders"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Methods for Creating and Managing Shared Folders<div class="heading-after">...</div></h3><div class="heading-children"><div class="heading-wrapper"><h4 data-heading="Using File Explorer for Sharing" class="heading" id="Using_File_Explorer_for_Sharing"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Using File Explorer for Sharing<div class="heading-after">...</div></h4><div class="heading-children"><div><p>File Explorer, commonly used by administrators, offers two primary methods for sharing folders:</p></div><div><ol><li data-line="0"><strong>Simple Share Permissions</strong>: This option allows setting basic permissions (Read or Read/Write) for user or group accounts. Both share and file/folder level permissions are configured simultaneously. It's important to note that existing permissions on files and folders within the shared path are reset to align with those set through the File Sharing dialog.</li><li data-line="2"><strong>Advanced Share Permissions</strong>: More familiar to seasoned administrators, this method allows separate configuration of share and file system permissions. Advanced share permissions are set via the Advanced Sharing button in a folder’s Properties dialog. Unlike simple sharing, this doesn't reset permissions on the files and folders within the shared folder. File system permissions are set independently.</li></ol></div></div></div><div class="heading-wrapper"><h4 data-heading="Additional Configuration Options" class="heading" id="Additional_Configuration_Options"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Additional Configuration Options<div class="heading-after">...</div></h4><div class="heading-children"><div><ul><li data-line="0"><strong>Encrypt Data Access</strong>: Enables encryption for traffic to and from the shared folder, effective if the client supports SMB 3.0 or later.</li><li data-line="1"><strong>Folder Owner Email</strong>: Useful for addressing access-denied requests by specifying the folder owner’s email address.</li><li data-line="2"><strong>Folder Usage</strong>: Allows applying metadata to categorize the nature of files in the folder, with options like User Files, Group Files, Application Files, and Backup and Archival Files. This is particularly beneficial in conjunction with data classification rules.</li></ul></div></div></div><div class="heading-wrapper"><h4 data-heading="Utilizing Windows Admin Center (WAC)" class="heading" id="Utilizing_Windows_Admin_Center_(WAC)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Utilizing Windows Admin Center (WAC)<div class="heading-after">...</div></h4><div class="heading-children"><div><p>WAC offers basic file share configuration options. However, it is not as comprehensive as what is available through Server Manager or File Explorer.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Managing Shares with Server Manager" class="heading" id="Managing_Shares_with_Server_Manager"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Managing Shares with Server Manager<div class="heading-after">...</div></h4><div class="heading-children"><div><p>The Server Manager console is a more centralized tool for managing shares, including on remote servers. It allows for the configuration of share permissions similarly to Advanced Share Permissions in File Explorer, without resetting file system permissions. Additional features include:</p></div><div><ul><li data-line="0"><strong>Enable Access-Based Enumeration</strong>: By default, this setting ensures users only see files and folders they have access to.</li><li data-line="1"><strong>Allow Caching of Share</strong>: Facilitates offline file access and, with appropriate group policies, the use of BranchCache.</li></ul></div></div></div><div class="heading-wrapper"><h4 data-heading="File Server Resource Manager Integration" class="heading" id="File_Server_Resource_Manager_Integration"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>File Server Resource Manager Integration<div class="heading-after">...</div></h4><div class="heading-children"><div><p>When integrated with File Server Resource Manager, the Server Manager’s share properties interface provides additional settings, enhancing file and folder management capabilities within the network environment.</p></div></div></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Methods of Deploying a File Share" class="heading" id="Methods_of_Deploying_a_File_Share"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Methods of Deploying a File Share<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Method 1: Using File Explorer" class="heading" id="Method_1:_Using_File_Explorer"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Method 1: Using File Explorer<div class="heading-after">...</div></h3><div class="heading-children"><div><ol><li data-line="0">Navigate to the desired folder in File Explorer.</li><li data-line="1">Right-click on the folder, select Properties, and then the Sharing tab.</li><li data-line="2">Click on 'Share' to specify user access. Options include selecting 'Everyone' for universal access.</li><li data-line="3">Alternatively, choose 'Advanced Sharing' to:<ul><li data-line="4">Share the folder with a specific name.</li><li data-line="5">Limit the number of simultaneous users.</li><li data-line="6">Add comments.</li><li data-line="7">Set permissions for users/groups, including 'Full Control', 'Change', and 'Read'.</li><li data-line="8">Full Control permission allows users to modify folder permissions.</li></ul></li><li data-line="9">Apply the settings.</li><li data-line="10">Access the shared folder on the network by searching <code>\\serverName\sharedFolder</code>.</li><li data-line="11">This process uses SMB (Server Message Block) protocol over port 445.</li></ol></div></div></div><div class="heading-wrapper"><h3 data-heading="Method 2: Using Server Manager" class="heading" id="Method_2:_Using_Server_Manager"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Method 2: Using Server Manager<div class="heading-after">...</div></h3><div class="heading-children"><div><ol><li data-line="0">Open Server Manager, navigate to File and Storage Services, then Shares.</li><li data-line="1">Select Tasks, and choose New Share.</li><li data-line="2">Choose a share profile from options like SMB Share - Quick, Advanced, Applications, NFS Share - Quick, and Advanced.<ul><li data-line="3">SMB is suitable for Windows environments.</li><li data-line="4">NFS is interoperable with Linux and macOS.</li></ul></li><li data-line="5">Specify the share location and provide a share name and description.</li><li data-line="6">Configure options like access-based enumeration, caching, and data access encryption.</li><li data-line="7">Set permissions, defaulting to 'Everyone' with full control for share permissions, and specify NTFS permissions for folder access.</li><li data-line="8">Finalize the creation of the share.</li></ol></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="NTFS Permissions Inheritance" class="heading" id="NTFS_Permissions_Inheritance"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>NTFS Permissions Inheritance<div class="heading-after">...</div></h2><div class="heading-children"><div><p>When NTFS (New Technology File System) permissions are set on a folder, these permissions automatically propagate to all subfolders and files within that folder. Administrators can fine-tune these settings to apply permissions to specific items, such as 'this folder only', 'this folder and files', 'subfolders and files only', 'subfolders only', and 'files only'.</p></div></div></div><div class="heading-wrapper"><h2 data-heading="Configuring File Shares through PowerShell" class="heading" id="Configuring_File_Shares_through_PowerShell"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configuring File Shares through PowerShell<div class="heading-after">...</div></h2><div class="heading-children"><div><p>To set up file shares via PowerShell:</p></div><div><ol><li data-line="0">Install the file server feature using the command: <code>install-windowsfeature fs-fileserver</code>.</li><li data-line="1">If NFS (Network File System) access is required, install the NFS role service with <code>install-windowsfeature fs-nfs-service</code>. This enables compatibility with non-Windows systems like Linux and macOS.</li></ol></div><div><p>To create a new smb share : <span alt="PowerShell > Create SMB Share" src="PowerShell#Create SMB Share" class="internal-embed markdown-embed inline-embed is-loaded"></span></p><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div><p></p></div><div><p>To view a smb share: <span alt="PowerShell > Verify SMB Share" src="PowerShell#Verify SMB Share" class="internal-embed markdown-embed inline-embed is-loaded"></span></p><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div><p></p></div><div><p>To add and remove smb access rights use the following command: <span alt="PowerShell > Grant Or Remove SMB Share Access" src="PowerShell#Grant Or Remove SMB Share Access" class="internal-embed markdown-embed inline-embed is-loaded"></span></p><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div><p></p></div><div><p>To monitor share sessions : <span alt="PowerShell > View SMB Sessions" src="PowerShell#View SMB Sessions" class="internal-embed markdown-embed inline-embed is-loaded"></span></p><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div><br>to close a session <span alt="PowerShell > Close a SMB Session" src="PowerShell#Close a SMB Session" class="internal-embed markdown-embed inline-embed is-loaded"><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></span><p></p></div><div><p>To unblock or block a user from SMB access, use the following command: <span alt="PowerShell > Block/Unblock a user from SMB access" src="PowerShell#Block/Unblock a user from SMB access" class="internal-embed markdown-embed inline-embed is-loaded"></span></p><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div><p></p></div><div><p>To set SMB1 access to false and log attempts to access SMB1, and set client timeout use the following commands: <span alt="PowerShell > Security SMB Configuration Timeout" src="PowerShell#Security SMB Configuration Timeout" class="internal-embed markdown-embed inline-embed is-loaded"></span></p><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div><p></p></div><div class="heading-wrapper"><h3 data-heading="File Server Resource Manager (FSRM)" class="heading" id="File_Server_Resource_Manager_(FSRM)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>File Server Resource Manager (FSRM)<div class="heading-after">...</div></h3><div class="heading-children"><div class="heading-wrapper"><h4 data-heading="Role and Features of FSRM" class="heading" id="Role_and_Features_of_FSRM"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Role and Features of FSRM<div class="heading-after">...</div></h4><div class="heading-children"><div><p>FSRM is a tool for managing and classifying data on file servers, encompassing various features:</p></div><div><ol><li data-line="0"><strong>Quota Management</strong>: Limits space on a volume or folder, with the ability to apply quotas automatically or through templates.</li><li data-line="1"><strong>File Screening Management</strong>: Controls the types of files that can be stored, based on file extensions.</li><li data-line="2"><strong>Storage Reports</strong>: Identifies disk usage trends and monitors unauthorized file storage attempts.</li><li data-line="3"><strong>File Classification Infrastructure</strong>: Automates data classification and applies policies like access restrictions, encryption, and expiration based on file properties.</li><li data-line="4"><strong>File Management Tasks</strong>: Applies conditional policies and actions to files, supporting various administrative actions.</li><li data-line="5"><strong>Access-Denied Assistance</strong>: Provides custom error messages for access issues related to permissions or FSRM-based protections.</li></ol></div></div></div><div class="heading-wrapper"><h4 data-heading="Managing FSRM" class="heading" id="Managing_FSRM"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Managing FSRM<div class="heading-after">...</div></h4><div class="heading-children"><div><p>FSRM can be configured and managed using the File Server Resource Manager MMC console or through Windows PowerShell, offering flexibility and control in data management.</p></div></div></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Server Message Block (SMB) Protocol Overview" class="heading" id="Server_Message_Block_(SMB)_Protocol_Overview"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Server Message Block (SMB) Protocol Overview<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Introduction to SMB" class="heading" id="Introduction_to_SMB"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Introduction to SMB<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Server Message Block (SMB) is a network file sharing protocol that operates on the TCP/IP protocol suite. Its primary function is to enable applications on a computer to read and write files, as well as request services from server programs within a network. This capability facilitates the access and manipulation of files on a remote server directly from an application, encompassing actions such as reading, creating, and updating files.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="Evolution of the SMB Protocol" class="heading" id="Evolution_of_the_SMB_Protocol"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Evolution of the SMB Protocol<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Developed by Microsoft in the 1980s, SMB has undergone several evolutionary stages to enhance its performance and security features.</p></div><div class="heading-wrapper"><h4 data-heading="SMB 1.0: The Beginning" class="heading" id="SMB_1.0:_The_Beginning"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>SMB 1.0: The Beginning<div class="heading-after">...</div></h4><div class="heading-children"><div><p>The original version, SMB 1.0, was characterized by bandwidth inefficiency and a lack of robust security measures.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="SMB 2.0: Performance Improvements" class="heading" id="SMB_2.0:_Performance_Improvements"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>SMB 2.0: Performance Improvements<div class="heading-after">...</div></h4><div class="heading-children"><div><p>With the introduction of SMB 2.0 in Windows Server 2008, significant performance enhancements were implemented. However, it did not substantially address security concerns.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="SMB 3.0: Advanced Features and Security" class="heading" id="SMB_3.0:_Advanced_Features_and_Security"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>SMB 3.0: Advanced Features and Security<div class="heading-after">...</div></h4><div class="heading-children"><div><p>Microsoft introduced SMB 3.0 in Windows Server 2012, incorporating several advanced features:</p></div><div><ul><li data-line="0"><strong>SMB Transparent Failover</strong>: This feature allows for uninterrupted service during hardware or software maintenance in clustered file server environments.</li><li data-line="1"><strong>SMB Scale Out</strong>: Offers simultaneous access to data files in clustered configurations with direct input/output through all nodes of a file server cluster.</li><li data-line="2"><strong>SMB Encryption</strong>: Provides end-to-end encryption on untrusted networks, enhancing data security against eavesdropping.</li><li data-line="3"><strong>Windows PowerShell Commands</strong>: Facilitates command-line management of file shares on the server.</li><li data-line="4"><strong>SMB Multichannel</strong>: Aggregates network bandwidth and increases network fault tolerance when multiple paths are available between the SMB client and server.</li><li data-line="5"><strong>SMB Direct</strong>: Utilizes network adapters with Remote Direct Memory Access (RDMA) for high-speed, low-latency, and efficient CPU usage data transfers.</li></ul></div></div></div><div class="heading-wrapper"><h4 data-heading="SMB 3.1.1: Further Enhancements" class="heading" id="SMB_3.1.1:_Further_Enhancements"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>SMB 3.1.1: Further Enhancements<div class="heading-after">...</div></h4><div class="heading-children"><div><p>Introduced in Windows Server 2016, SMB 3.1.1 brought additional improvements:</p></div><div><ul><li data-line="0"><strong>Preauthentication Integrity</strong>: Enhances protection against man-in-the-middle attacks during SMB connection establishment and authentication.</li><li data-line="1"><strong>SMB Encryption Improvements</strong>: Introduces AES-128-GCM for better performance with modern processors, compared to the earlier AES-128-CCM.</li><li data-line="2"><strong>Removal of RequireSecureNegotiate Setting</strong>: Aims to improve compatibility with third-party SMB implementations, defaulting to use preauthentication integrity.</li></ul></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="Common Use Cases of SMB 3.x Enhancements" class="heading" id="Common_Use_Cases_of_SMB_3.x_Enhancements"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Common Use Cases of SMB 3.x Enhancements<div class="heading-after">...</div></h3><div class="heading-children"><div><p>SMB 3.x enhancements, particularly SMB Direct and SMB Multichannel, are pivotal in deploying cost-efficient, high-performance, and continuously available storage for server applications on file servers. These features enable:</p></div><div><ul><li data-line="0"><strong>High-Performance File Sharing</strong>: Using multiple network connections simultaneously with SMB Multichannel enhances file-sharing performance.</li><li data-line="1"><strong>Efficient Data Transfers</strong>: SMB Direct facilitates the transfer of large data volumes at high speeds with reduced CPU usage.</li><li data-line="2"><strong>Alternative to Traditional Storage Solutions</strong>: SMB 3.x file shares offer an alternative to iSCSI or Fibre Channel SAN devices.</li><li data-line="3"><strong>High Availability for Hyper-V</strong>: Enables storing VM files, including configuration and .vhd files, on highly available SMB file shares, known as Scale-Out File Servers.</li><li data-line="4"><strong>Support for Cluster Upgrades</strong>: Cluster Dialect Fencing in SMB 3.1.1 assists in upgrading clusters between operating system versions.</li></ul></div><div><p>Windows Server negotiates the highest SMB version supported by a client, potentially leading to a protocol downgrade in mixed environments. It's important to note that SMB 1.0, known for its vulnerabilities, is not installed by default starting from Windows Server version 1709 and Windows 10 version 1709.</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Understanding Volume Shadow Copy Service (VSS)" class="heading" id="Understanding_Volume_Shadow_Copy_Service_(VSS)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Understanding Volume Shadow Copy Service (VSS)<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Role of VSS in Data Backup" class="heading" id="Role_of_VSS_in_Data_Backup"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Role of VSS in Data Backup<div class="heading-after">...</div></h3><div class="heading-children"><div><p>VSS, integral to Windows Server, plays a crucial role in the backup and restoration of critical business data, particularly addressing challenges posed by open files or files in an inconsistent state.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="VSS Components and Functions" class="heading" id="VSS_Components_and_Functions"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>VSS Components and Functions<div class="heading-after">...</div></h3><div class="heading-children"><div><p>VSS comprises several key components, each playing a specific role in the backup process:</p></div><div><ul><li data-line="0"><strong>VSS Service</strong>: A core part of the Windows operating system, it facilitates communication between other VSS components.</li><li data-line="1"><strong>VSS Requester</strong>: Typically a backup application, it requests the creation, import, or deletion of shadow copies.</li><li data-line="2"><strong>VSS Writer</strong>: Ensures the consistency of the dataset being backed up, often integrated into business applications like SQL Server or Exchange Server.</li><li data-line="3"><strong>VSS Provider</strong>: Responsible for creating and maintaining shadow copies, either through software or hardware means.</li></ul></div></div></div><div class="heading-wrapper"><h3 data-heading="SMB Integration and VSS" class="heading" id="SMB_Integration_and_VSS"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>SMB Integration and VSS<div class="heading-after">...</div></h3><div class="heading-children"><div><p>For VSS to function effectively with SMB file shares, both the SMB client and server must support at least SMB 3.0. Additionally, VSS can handle volume sizes up to 64 TB, catering to large-scale data backup needs</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Overview of BranchCache" class="heading" id="Overview_of_BranchCache"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Overview of BranchCache<div class="heading-after">...</div></h2><div class="heading-children"><div><p>BranchCache is a feature designed to improve file access speeds across wide area networks (WAN) with medium to high latency. It achieves this by creating local cached copies of files from remote file servers. Once a file is accessed from a remote server by a user in a branch office, BranchCache stores a copy of this file locally. When another user in the same office accesses the same file, they retrieve it from the local cache instead of the remote server, enhancing access speed. BranchCache also ensures the cached version is up-to-date by performing regular checks. If a file has been updated at the source, BranchCache updates its local copy accordingly.</p></div></div></div><div class="heading-wrapper"><h2 data-heading="Configuring BranchCache Using Group Policies" class="heading" id="Configuring_BranchCache_Using_Group_Policies"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configuring BranchCache Using Group Policies<div class="heading-after">...</div></h2><div class="heading-children"><div><p>To utilize BranchCache, it's necessary to configure Group Policies for file servers in your organization. This configuration is done through the 'Hash Publication for BranchCache' policy found in <code>Computer Configuration\Policies\Administrative Templates\Network\Lanman Server</code> node. There are three configuration options:</p></div><div><ol><li data-line="0"><strong>Allow Hash Publication Only For Shared Folders On Which BranchCache is Enabled</strong>: This option enables selective activation of BranchCache on specific shared folders.</li><li data-line="2"><strong>Disallow Hash Publication On All Shared Folders</strong>: Select this option to disable BranchCache across all shared folders.</li><li data-line="4"><strong>Allow Hash Publication For All Shared Folders</strong>: Use this to enable BranchCache for every shared folder in your network.</li></ol></div><div><p>For selective use, you must manually activate BranchCache on the chosen shares via the 'Caching' option in the 'Advanced Sharing' page under 'Offline Settings'.</p></div></div></div><div class="heading-wrapper"><h2 data-heading="Configuring BranchCache on Client Computers" class="heading" id="Configuring_BranchCache_on_Client_Computers"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configuring BranchCache on Client Computers<div class="heading-after">...</div></h2><div class="heading-children"><div><p>Client computers also require configuration to support BranchCache. This is done through Group Policy in <code>Computer Configuration\Policies\Administrative Templates\Network\BranchCache</code>. There are two modes available:</p></div><div><ul><li data-line="0"><strong>Distributed Cache Mode</strong>: In this mode, each client computer (Windows 7 or later) hosts a portion of the cache.<br></li><li data-line="2"><strong>Hosted Cache Mode</strong>: Here, a dedicated server in the branch office hosts the entire cache. Any server running Windows Server 2008 R2 or later can function as a hosted cache server.<br></li></ul></div></div></div><div class="heading-wrapper"><h2 data-heading="Understanding Distributed File System (DFS)" class="heading" id="Understanding_Distributed_File_System_(DFS)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Understanding Distributed File System (DFS)<div class="heading-after">...</div></h2><div class="heading-children"><div><p>DFS provides significant advantages over traditional file shares, particularly in environments with multiple branch offices. It replicates content across several servers, maintaining a single point of access for clients. DFS has two key components:</p></div><div class="heading-wrapper"><h3 data-heading="DFS Namespace" class="heading" id="DFS_Namespace"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>DFS Namespace<div class="heading-after">...</div></h3><div class="heading-children"><div><p>A DFS namespace is a virtual view of shared folders in an organization. Unlike traditional file sharing which requires knowledge of the specific server and file share name, a DFS namespace uses a universal naming convention (UNC) path that is consistent across all shared folders. For example:</p></div><div><ul><li data-line="0">Traditional Sharing: <code>\\HLFS1\IT</code>, <code>\\HLFS2\Accounting</code>, <code>\\HLFS3\Videos</code></li><li data-line="1">DFS Namespace: <code>\\Hinoklearning.com\IT</code>, <code>\\Hinoklearning.com\Accounting</code>, <code>\\Hinoklearning.com\Videos</code></li></ul></div><div><p>Types of DFS namespaces:</p></div><div><ul><li data-line="0"><strong>Domain-Based Namespace</strong>: Stores configuration data in Active Directory and remains available even if one of the hosting servers goes offline.<br></li><li data-line="2"><strong>Standalone Namespace</strong>: Stores data in the registry of a single server and does not utilize Active Directory. The namespace becomes unavailable if the hosting server fails.<br></li></ul></div></div></div><div class="heading-wrapper"><h3 data-heading="DFS Replication" class="heading" id="DFS_Replication"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>DFS Replication<div class="heading-after">...</div></h3><div class="heading-children"><div><p>DFS replication ensures that any changes made to files in one location are automatically replicated across all other locations. It uses block-level replication for efficiency and has a robust conflict-management system. The replication model is "last writer wins" for editing conflicts and "earliest creator wins" for file creation conflicts. Conflicted files are moved to a 'Conflict and Deleted' folder for resolution.</p></div><div class="heading-wrapper"><h4 data-heading="Replicated Folders and Targets" class="heading" id="Replicated_Folders_and_Targets"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Replicated Folders and Targets<div class="heading-after">...</div></h4><div class="heading-children"><div><p>In DFS, replicated folders can have multiple folder targets across different servers, enabling redundancy and reliability.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Replication Topology" class="heading" id="Replication_Topology"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Replication Topology<div class="heading-after">...</div></h4><div class="heading-children"><div><p>Replication groups in DFS can have different topologies:</p></div><div><ul><li data-line="0"><strong>Hub and Spoke</strong>: Suitable for hub-and-spoke network structures.</li><li data-line="1"><strong>Full Mesh</strong>: Allows each member to replicate with all other members.</li><li data-line="2"><strong>No Topology</strong>: Offers flexibility to create custom replication paths.</li></ul></div></div></div><div class="heading-wrapper"><h4 data-heading="Replication Schedules" class="heading" id="Replication_Schedules"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Replication Schedules<div class="heading-after">...</div></h4><div class="heading-children"><div><p>Replication schedules control the timing and bandwidth of replication activities. They can be set to continuous operation with adjustable bandwidth limits, accommodating network capacity and usage patterns.</p></div></div></div></div></div></div></div></div></div><div class="heading-wrapper"><h1 data-heading="Configuration" class="heading" id="Configuration"><div class="heading-before"></div>Configuration<div class="heading-after">...</div></h1><div class="heading-children"><div class="heading-wrapper"><h2 data-heading="Configuring Quota Management and File Screening" class="heading" id="Configuring_Quota_Management_and_File_Screening"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configuring Quota Management and File Screening<div class="heading-after">...</div></h2><div class="heading-children"><div><ol><li data-line="0">On HLDC1-&gt; Install the role: File Server Resource Manager -&gt; Tools -&gt; Open File Server Resource Manager</li></ol></div><div><p><span alt="Pasted image 20231224072853.png" src="lib\media\pasted-image-20231224072853.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231224072853.png" src="lib\media\pasted-image-20231224072853.png"></span></p></div><div><ol><li data-line="0">Under Quota Management -&gt; Right click on Quota -&gt; Create Quota -&gt; Specify the path (folder you want to place the quota on) -&gt; Specify the limit in MBs from the drop down</li><li data-line="1">Under File Screening Management -&gt; Right click File Screen -&gt; Specify the Path of the folder -&gt; specify the file extensions you want to block.</li></ol></div></div></div><div class="heading-wrapper"><h2 data-heading="Configure Windows Server file share access" class="heading" id="Configure_Windows_Server_file_share_access"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configure Windows Server file share access<div class="heading-after">...</div></h2><div class="heading-children"></div></div><div class="heading-wrapper"><h2 data-heading="Configure SMB Security" class="heading" id="Configure_SMB_Security"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configure SMB Security<div class="heading-after">...</div></h2><div class="heading-children"><div><ol><li data-line="0">Verify if SMB is currently running, utilize the following command: <span alt="PowerShell > Verify SMB 1.0 status" src="PowerShell#Verify SMB 1.0 status" class="internal-embed markdown-embed inline-embed is-loaded"><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></span><br><span alt="Pasted image 20231224073711.png" src="lib\media\pasted-image-20231224073711.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231224073711.png" src="lib\media\pasted-image-20231224073711.png"></span></li></ol></div><div><div data-callout-metadata="" data-callout-fold="" data-callout="note" class="callout node-insert-event"><div class="callout-title"><div class="callout-icon"><svg height="16" style="width:16px;max-width:100%"></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content"><p>By default it's disabled on Windows Server 2022</p></div></div></div><div><p>In a production environment before disabling SMB1, we must verify it's not currently in use in the environment by running the following command for a few weeks and verifying through event logs: <span alt="PowerShell > Audit SMB1" src="PowerShell#Audit SMB1" class="internal-embed markdown-embed inline-embed is-loaded"></span></p><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div><br>You can then disable SMB1 protocol by using the following command: <span alt="PowerShell > Disable SMB1 protocol" src="PowerShell#Disable SMB1 protocol" class="internal-embed markdown-embed inline-embed is-loaded"><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></span><br>Next verify if SMB Encryption is enabled on the server by using the following command: <span alt="PowerShell > Verify SMB Encryption status" src="PowerShell#Verify SMB Encryption status" class="internal-embed markdown-embed inline-embed is-loaded"><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></span><br>To enable SMB Encryption on all file shares on the serve, use the following command: <span alt="PowerShell > Enable SMB Encryption" src="PowerShell#Enable SMB Encryption" class="internal-embed markdown-embed inline-embed is-loaded"><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></span><br><span alt="Pasted image 20231224074631.png" src="lib\media\pasted-image-20231224074631.png" class="internal-embed media-embed image-embed is-loaded"><img alt="Pasted image 20231224074631.png" src="lib\media\pasted-image-20231224074631.png"></span><p></p></div><div><p>Azure File Sync is one of the most useful hybrid technologies available for Windows Server. Anyone who has managed a file server knows the challenges they pose, from having to remove disused files on a regular basis to ensure that there is enough space for new files, to challenges around ensuring that files are regularly backed up, and even to being able to restore a file that you might have removed at some point to save space because someone actually needs it now. Azure File Sync helps you address all these problems, reducing the amount of time you need to spend maintaining file servers s</p></div><div><p>by default, this setting ensures that users can only see files and folders to which they have access.</p></div><div class="heading-wrapper"><h4 data-heading="Create Azure File Sync Service" class="heading" id="Create_Azure_File_Sync_Service"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Create Azure File Sync Service<div class="heading-after">...</div></h4><div class="heading-children"><div><p>The backbone of Azure File Sync is the Storage Sync Service. The storage sync service is the service that runs in Azure that manages Azure. You should deploy as few storage sync services as necessary since a Windows Server file server can only be registered with one sync service and file servers that are connected to different storage sync services are unable to synchronize with each other.</p></div><div><p>You should plan to deploy the storage sync service and the Azure File Share endpoints used by each sync group in the same Azure region and resource group. To deploy a storage sync service, perform the following steps:</p></div><div><ol><li data-line="0"><p>In the Azure portal select&nbsp;<strong>Create a resource</strong>&nbsp;and then search for Azure File Sync. In the list of results select&nbsp;<strong>Azure File Sync</strong>&nbsp;and then select&nbsp;<strong>Create</strong>.</p></li><li data-line="2"><p>On the Deploy Storage Sync page, provide the following:</p><ul><li data-line="4"><strong>Name</strong>&nbsp;A name for the storage sync service. This name only needs to be unique on a per-region basis, but it’s a good idea to have it unique for your organization.<br></li><li data-line="6"><strong>Subscription</strong>&nbsp;The name of the subscription that will host the storage sync service. This will be the subscription where costs accrue for the service.<br></li><li data-line="8"><strong>Resource Group</strong>&nbsp;The resource group that will host the storage sync service. You should also plan to host the storage account used with the sync service in the same resource group.<br></li><li data-line="10"><strong>Location</strong>&nbsp;The location where you will deploy Azure File Sync. This location should be geographically proximate to where your server endpoints are. Remember that clients will be accessing files through the file server endpoints close to them. Bandwidth and latency between the server endpoint and the file share is generally only an issue when there is a substantive delay between a file that is tiered being requested and it synchronizing back to the endpoint.<br></li></ul></li></ol></div></div></div><div class="heading-wrapper"><h4 data-heading="Create sync groups" class="heading" id="Create_sync_groups"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Create sync groups<div class="heading-after">...</div></h4><div class="heading-children"><div><p>A sync group allows you to replicate a specific folder and file structure across server and Azure File Share endpoints. Each sync group has a single Azure file share endpoint but can have multiple server endpoints. An Azure file storage sync service can host multiple sync groups, and a Windows Server endpoint can participate in multiple sync groups as long as those sync groups belong to the same storage sync service. To create a sync group, you need to specify a sync group name, which is separate from the sync service name; the name of the storage account that will be used; and the name of the Azure File Share that will be used. You should create the storage account and Azure File Share before creating the sync group.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Create cloud endpoints" class="heading" id="Create_cloud_endpoints"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Create cloud endpoints<div class="heading-after">...</div></h4><div class="heading-children"><div><p>The back end of Azure File Sync is an&nbsp;<em>Azure File Share</em>, also termed a&nbsp;<em>cloud endpoint</em>. This is a cloud file share that will store any file that is written to an Azure File Sync endpoint. The back-end Azure File Share stores the entire contents of what appears to be on the file share that is the front end for Azure File Sync. Creating a file share involves creating a storage account and then creating the file share within the storage account.</p></div><div><p>To create an Azure File Share, consider the following:</p></div><div><ul><li data-line="0"><strong>Performance requirements</strong>&nbsp;In most cases, the only computers interacting with the file share in an Azure File Sync deployment are the server endpoints. This means that you are unlikely to require the higher I/O performance capabilities of a premium file share that is hosted on solid-state disk (SSD)-based hardware.<br></li><li data-line="2"><strong>Redundancy requirements</strong>&nbsp;Standard file shares can use locally redundant, zone-redundant, or geo-redundant storage. Large file shares of the type you are likely to use with Azure File Sync are only available with locally redundant and zone-redundant storage.<br></li><li data-line="4"><strong>File share size</strong>&nbsp;Local and zone redundant storage accounts allow for file shares that span up to 100 TiB. The file share size will need to be able to hold all the tiered data from your file share endpoints and should be substantially larger than the storage on any on-premises server. The amount of storage you allocate to a file share will depend on the amount of data you need to tier and how much storing that data costs. Storage and transfer costs are billed separately, and even if you create a file share that is larger than you need, your organization will only be billed by the storage capacity actually used.<br></li></ul></div><div><p>You can configure Azure Backup to back up this file share endpoint. The advantage of this is that in the event of data corruption or deletion, you can just recover data to the Azure File Share in the cloud from the Azure console, and it will replicate down to all the Azure File Sync endpoints.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Register servers" class="heading" id="Register_servers"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Register servers<div class="heading-after">...</div></h4><div class="heading-children"><div><p>The Azure File Sync agent allows you to register a server with a storage sync service. To register a server, download and install the Azure File Sync agent from the Microsoft Download Center.&nbsp;As part of the installation process, you can configure the agent to be automatically updated through Microsoft Update. When the installation completes, you perform registration with a storage sync service. To register a server, you need local Administrator privileges on the server you want to register and you need an Azure account that is a member of the Owner or Contributor management role for the storage sync service in Azure. You can delegate these roles to an Azure AD account under&nbsp;<strong>Access Control (IAM)</strong>&nbsp;on the Storage Sync Service properties page in the Azure console. During the registration process, you must specify the Azure subscription, resource group, and storage sync service that will be used with the server endpoint.</p></div><div><p>Registration will use Azure credentials to create a trust relationship between the storage sync service and the Windows Server computer. The Windows Server instance will then create an identity separate from the user account used to create the registration that will function as long as the server remains registered and the current share Access Signature token associated with the storage account remains valid.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Create server endpoints" class="heading" id="Create_server_endpoints"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Create server endpoints<div class="heading-after">...</div></h4><div class="heading-children"><div><p>An Azure File Sync endpoint consists of a server and a path that are enrolled in an Azure File Sync service. A Windows Server can host multiple endpoints, each of which has a different path, as long as those endpoints are in different sync groups associated with the same sync service. An Azure File Sync endpoint functions as the folder structure that underlies a normal file share. Administrators create a traditional shared folder and point it at the path that the Azure File Sync endpoint replicates to. You can also point a Distributed File System (DFS) namespace at this path, replacing Distributed File System Replication (DFSR) with Azure File Sync replication while still keeping the navigational advantages of the DFS way of identifying shared folders.</p></div><div><p>Create a server endpoint by adding the server that you registered with the storage sync service and specifying the local path to the files that you want to replicate using Azure File Sync. When creating the server endpoint, you also specify the cloud tiering settings in terms of how much free space should always be available on the local volume that hosts the files and how many days after a file was last accessed should pass before the file is tiered. After the endpoint is created, any files in the path specified will be replicated up to the Azure File Share that functions as the cloud endpoint. If you create an endpoint that points to the system volume of the registered server, you cannot enable cloud tiering on that endpoint.</p></div><div><p>File shares that serve as front ends for Azure File Sync endpoints should have the same share permissions. If you are using Azure File Sync with a failover cluster, ensure that the agent is installed on each node in the cluster and that each node in the cluster is registered to the same storage sync service.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Configure cloud tiering" class="heading" id="Configure_cloud_tiering"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configure cloud tiering<div class="heading-after">...</div></h4><div class="heading-children"><div><p>Azure File Sync uses a process called&nbsp;<em>cloud tiering</em>&nbsp;to ensure that there is capacity on the volume that hosts the share. Cloud tiering means that you don’t need to worry about constantly freeing up space for new files. You can configure Azure File Sync on a per-file share basis to tier files based on when the file was last accessed, how much free space there is on the volume that hosts the share, or both. For example, you might configure Azure File Sync so that any file that hasn’t been accessed in 14 days on a particular share is automatically tiered to Azure. You could also specify that the least recently accessed files be automatically tiered to Azure in the event that the volume has only 30 percent free space remaining. If you have both a policy to tier files that exceed a certain age and a requirement that a certain amount of space still be available on the volume, Azure File Sync will ensure that requirement for free space is met by tiering least recently accessed files until the free space requirement is met.</p></div><div><p>From the users’ perspective, a tiered file still appears as though it’s on the file server that they are accessing. If users try to open the file, it syncs down from the back-end Azure File Share to the Azure File Sync file share endpoint and then opens normally. Cloud tiering can be configured on a per-server endpoint basis in the Azure console.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Monitor File Sync" class="heading" id="Monitor_File_Sync"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Monitor File Sync<div class="heading-after">...</div></h4><div class="heading-children"><div><p>You can monitor Azure File Sync using Azure Monitor, the Storage Sync Service, and Windows Server. Azure Monitor provides the following data:</p></div><div><ul><li data-line="0">Bytes synced<br></li><li data-line="2">Cloud tiering cache hit rate<br></li><li data-line="4">Cloud tiering recall size<br></li><li data-line="6">Cloud tiering recall size by application<br></li><li data-line="8">Cloud tiering recall success rate<br></li><li data-line="10">Cloud tiering recall throughput<br></li><li data-line="12">Files not syncing<br></li><li data-line="14">Files synced<br></li><li data-line="16">Server cache size<br></li><li data-line="18">Server online status<br></li><li data-line="20">Sync session results<br></li></ul></div><div><p>The Storage Sync Service in the Azure portal provides you with the following data:</p></div><div><ul><li data-line="0">Registered server health<br></li><li data-line="2">Server endpoint health<ul><li data-line="4">Files not syncing<br></li><li data-line="6">Sync activity<br></li><li data-line="8">Cloud tiering efficiency<br></li><li data-line="10">Files not tiering<br></li><li data-line="12">Recall errors<br></li></ul></li><li data-line="14">Metrics<br></li></ul></div><div><p>You can also view the Telemetry event log in Event Viewer on a server endpoint under Applications and Services\Microsoft\FileSync\Agent to view sync health information. Azure File Sync performance counters are available in Performance Monitor that allow you to view bandwidth utilization and performance of the Azure File Sync agent.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Migrate DFS to Azure File Sync" class="heading" id="Migrate_DFS_to_Azure_File_Sync"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Migrate DFS to Azure File Sync<div class="heading-after">...</div></h4><div class="heading-children"><div><p>When you migrate DFS to Azure File Sync, you replace the older DFS file replication technology with Azure File Sync. You’ll learn about both these technologies in more detail later in the chapter. The technology that is relevant to Azure File Sync is the namespace technology.</p></div><div><p>When you use DFS Namespaces, you can configure a single UNC path to map to multiple SMB shares. For example&nbsp;<em>\adatum\shares\hovercraft</em>&nbsp;can map to&nbsp;<em>\Adelaide-fs01\hovercraft</em>&nbsp;as well as&nbsp;<em>\Melbourne-fs01\hovercraft</em>. When a client attempts to access the DFS UNC path, they are directed by DFS to the closest SMB endpoint. When used with DFS replication, it meant that a user attempting to access a share would be connected to the closest DFS endpoint. When you use DFS Namespaces with Azure File Sync, a client that navigates to the DFS address will be directed to the closest Azure File Sync endpoint.</p></div><div><p>To migrate from DFS replication to Azure File Sync replication, perform the following steps:</p></div><div><ol><li data-line="0">Create a new sync group that will be used as the substitute for the DFS replication topology you are replacing.</li><li data-line="2">Start on the server that has the full set of data in your DFS replication topology to migrate. Install Azure File Sync on that server.</li><li data-line="4">Register that server and create a server endpoint for the first server to be migrated. Do not enable cloud tiering.</li><li data-line="6">Let all the data on that server sync to your Azure File Share cloud endpoint.</li><li data-line="8">Install and register the Azure File Sync agent on each of the remaining servers that host DFS replicas.</li><li data-line="10">Disable DFS replication on each server.</li><li data-line="12">Create an Azure File Sync server endpoint on each of the previous servers that participated in DFS replication. Do not enable cloud tiering.</li><li data-line="14">Ensure that the sync process completes and test your topology.</li><li data-line="16">Retire DFS-R.</li><li data-line="18">Enable cloud tiering on any server endpoint as desired.</li></ol></div><div><p>Allow Caching of Share. Allows files to be used offline. An additional setting, Enable BranchCache on the file share, allows use of BranchCache if the appropriate group policies are applied. You’ll learn more about BranchCache later in this chapter. You can configure this option when the Settings tab is selected.</p></div><div><p>Encrypt Data Access. When you enable this option, traffic to and from the shared folder is encrypted if the client supports SMB 3.0 (Windows 8 and later). You can configure this option when the Settings tab is selected.</p></div><div><p>Folder Owner Email. Setting the folder owner’s email addresses can be useful when resolving access-denied assistance requests. You can configure this when the Permission tab is selected.</p></div><div><p>Folder Usage. Folder-usage properties allow you to apply metadata to the folder that specifies the nature of the files stored there. You can choose between User Files, Group Files, Application Files, and Backup and Archival Files. You can use folder usage properties with data classification rules.</p></div><div><p>Windows Admin Center (WAC) also provides basic file share configuration functionality, though this is not currently as sophisticated as what can be accomplished through Server Manager or File Explorer.</p></div><div><p>Configure file screens<br>File screens allow you to block users from writing files to file shares based on file name extension. For example, you can use a file screen to stop people from storing video or audio files on file shares. File screens are implemented based on file name. Usually, this just means file screens are implemented by file extension, but you can configure file screens based on a pattern match of any part of a file name. You implement file screens using file groups and file screen templates.</p></div><div><p>A file screen doesn’t block files that are already there; file screens just stop new files from being written to the share. File screens also only work based on file name. If you have users who are especially cunning, they might figure out that it’s possible to get around a file screen by renaming files, so they don’t get blocked by the screen.</p></div><div class="heading-wrapper"><h5 data-heading="File groups" class="heading" id="File_groups"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>File groups<div class="heading-after">...</div></h5><div class="heading-children"><div><p>A file group is a pre-configured collection of file extensions related to a specific type of file. For example, the Image Files file group includes file name extensions related to image files, such as .jpg, .png, and .gif. While file groups are usually fairly comprehensive in their coverage, they aren’t always complete. Should you need to, you can modify the list to add new file extensions.</p></div><div><p>The file groups included with FSRM include the following:</p></div><div><ul><li data-line="0"><strong>Audio And Video Files</strong>&nbsp;Blocks file extensions related to audio and video files, such as .avi and .mp3s<br></li><li data-line="2"><strong>Backup Files</strong>&nbsp;Blocks file extensions related to backups, including .bak and .old files<br></li><li data-line="4"><strong>Compressed Files</strong>&nbsp;Blocks file extensions related to compressed files, such as .zip and .cab<br></li><li data-line="6"><strong>E-mail Files</strong>&nbsp;Blocks file extensions related to email storage, including .pst and .mbx files<br></li><li data-line="8"><strong>Executable Files</strong>&nbsp;Blocks file extensions related to executable files and scripts, such as .exe or .ps1 extensions<br></li><li data-line="10"><strong>Image Files</strong>&nbsp;Blocks file extensions related to images, such as .jpg or .png extensions<br></li><li data-line="12"><strong>Office Files</strong>&nbsp;Blocks file extensions related to Microsoft Office files, such as .docx and .pptx files<br></li><li data-line="14"><strong>System Files</strong>&nbsp;Blocks file extensions related to system files, including .dll and .sys files<br></li><li data-line="16">T<strong>emporary Files</strong>&nbsp;Blocks file extensions related to temporary files, such as .tmp. Also blocks files starting with the ~ character<br></li><li data-line="18"><strong>Text Files</strong>&nbsp;Blocks file extensions related to text files, including .txt and .asc files<br></li><li data-line="20"><strong>Web Page Files</strong>&nbsp;Blocks file extensions related to web page files, including .html and .htm files<br></li></ul></div><div><p>To edit the list of files in a file group, right-select the file group and select Edit File Group Properties. Using the dialog box you can modify the list of files to include and exclude files based on file name pattern. For example, you can do a simple exclusion or inclusion based on the file name suffix, such as <em>.bak. You also have the option of creating a more complex exclusion or inclusion based on the file name, such as backup </em>.*, which would exclude all files with the word backup at the start of any extension.</p></div><div><p>Exclusions allow you to add exceptions to an existing block rule. For example, you could configure a file screen to block all files that have the extension .vhdx. You might then create an exception for the name server2022.vhdx. When implemented, all files with the .vhdx extension would be blocked from being written to the share, except for files with the name server2022.vhdx.</p></div><div><p>While the NTFS and ReFS file systems are case sensitive, file screens are not case sensitive.</p></div><div><p>To create a new file group, right-select the File Groups node in the File Server Resource Manager console and select Create File Group. Provide the following information:</p></div><div><ul><li data-line="0"><strong>File Group Name</strong>&nbsp;The name for the file group.<br></li><li data-line="2"><strong>Files To Include</strong>&nbsp;Provide patterns that match the names of files you want to block from being written to the file server.<br></li><li data-line="4"><strong>Files To Exclude</strong>&nbsp;Provide patterns that match the names of files you want to exclude from the block.<br></li></ul></div></div></div><div class="heading-wrapper"><h5 data-heading="File screen templates" class="heading" id="File_screen_templates"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>File screen templates<div class="heading-after">...</div></h5><div class="heading-children"><div><p>File screen templates are made up of a screening type, a collection of file groups, and a set of actions to perform when a match is found. File screen templates support the following screening types:</p></div><div><ul><li data-line="0"><strong>Active Screening</strong>&nbsp;An active screen blocks users from writing files to the file share that have names that match those patterns listed in the file group.<br></li><li data-line="2"><strong>Passive Screening</strong>&nbsp;A passive screen doesn’t block users from writing files to the file share that have names that match patterns listed in the file group. Instead, you use a passive screen to monitor such activity.<br></li></ul></div><div><p>The actions you can configure include sending an email, writing a message to the event log, running a command, or generating a report.</p></div><div><p>After you have configured the appropriate file screen template, create the file screen by applying the template to a specific path. You can also create file screen exceptions, which exempt specific folders from an existing file screen. For example, you might apply a file screen at the root of a shared folder that blocks audio and video files from being written to the share. If you wanted to allow users to write audio and video files to one folder in the share, you could configure a file screen exception and apply it to that folder.</p></div></div></div></div></div><div class="heading-wrapper"><h4 data-heading="Configure File Server Resource Manager quotas" class="heading" id="Configure_File_Server_Resource_Manager_quotas"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configure File Server Resource Manager quotas<div class="heading-after">...</div></h4><div class="heading-children"><div><p>Quotas are important. If you don’t use them, file shares tend to end up consuming all available storage unless you have a solution such as Azure File Sync deployed. Some users dump as much as possible onto a file share unless quotas are in place and unless you are monitoring storage; the first you’ll hear about it is when the service desk gets calls about people being unable to add new files to the file share.</p></div><div><p>NTFS has had rudimentary quota functionality since the Windows NT days. The reason that most Windows Server administrators don’t bother with quota functionality is that it applies at the volume level and can’t be applied to individual user accounts. Needless to say, if you have 500 users for whom you want to configure quotas, you don’t want to have to individually configure a quota for each one. Even with command-line utilities, you still need to create an entry for each user.</p></div><div><p>File Server Resource Manager (FSRM) provides far more substantial quota functionality that makes quotas more practical to implement as a way of managing storage utilization on Windows Server file servers. Quotas in FSRM can be applied on a per-folder basis and are not cumulative across a volume. You can also configure quotas in FSRM so that users are sent warning emails if they exceed a specific quota threshold but before they are blocked from writing files to the file server. You manage quotas using FSRM by creating a quota template and then applying that quota template to a path.</p></div><div><p>Creating a quota template involves setting a limit, specifying a quota type, and then configuring notification thresholds. You can choose between the following quota types:</p></div><div><ul><li data-line="0"><strong>Hard Quota. Do Not Allow Users To Exceed Limit</strong>&nbsp;A hard quota blocks users from writing data to the file share after the quota value is exceeded.<br></li><li data-line="2"><strong>Soft Quota. Allow Users To Exceed Limit (Use For Monitoring)</strong>&nbsp;A soft quota allows you to monitor when users exceed a specific storage utilization value, but it doesn’t block users from writing data to the file share after the quota value is exceeded.<br></li></ul></div><div><p>Notification thresholds allow you to configure actions to be taken after a certain percentage of the assigned quotas are reached. You can configure notifications via email, get an item written to an event log, run a command, or have a report generated.</p></div><div><p>After you’ve created the quota template, you can apply it to a folder. To do this, select the Quotas node under Quota Management, and from the Action menu, select&nbsp;<strong>Create Quota</strong>. In the Create Quota dialog box, select the path to which the quota applies and the quota template you want to apply. You then choose between applying the quota to the whole path or setting up an auto-apply template. Auto-apply templates allow separate quotas to be applied to any new and existing quota path subfolders. For example, if you applied a quota to the C:\Example path using the 2 GB template, the quota would apply cumulatively for all folders in that path. If you chose an auto-apply template, a separate 2 GB quota would be configured for each new and existing folder under C:\Example.</p></div></div></div><div class="heading-wrapper"><h4 data-heading="Use additional FSRM functionality" class="heading" id="Use_additional_FSRM_functionality"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Use additional FSRM functionality<div class="heading-after">...</div></h4><div class="heading-children"><div><p>File Server Resource Manager includes advanced functionality that you can use to manage file servers in on-premises and hybrid environments.</p></div><div class="heading-wrapper"><h5 data-heading="Storage reports" class="heading" id="Storage_reports"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Storage reports<div class="heading-after">...</div></h5><div class="heading-children"><div><p>The Storage Reports functionality of FSRM allows you to generate information about the files that are being stored on a particular file server. You can use FSRM to create the following storage reports:</p></div><div><ul><li data-line="0"><strong>Duplicate Files</strong>&nbsp;This report locates multiple copies of the same file. If you’ve enabled deduplication on the volume hosting these files, these additional copies do not consume additional disk space because they are deduplicated.<br></li><li data-line="2"><strong>File Screening Audit</strong>&nbsp;This report allows you to view which users or applications are triggering file screens—for example, which users have tried to save music or video files to a shared folder.<br></li><li data-line="4"><strong>Files By File Group</strong>&nbsp;This report allows you to view files sorted by file group. You can view files by all file groups, or you can search for specific files—for example, a report on ZIP files stored on a shared folder.<br></li><li data-line="6"><strong>Files By Owner</strong>&nbsp;This report allows you to view files by owner. You can search for files by all owners or run a report that provides information on files by one or more specific users.<br></li><li data-line="8"><strong>Files By Property</strong>&nbsp;Use this report to find out about files based on a classification. For example, if you have a classification named Top_Secret, you can generate a report about all files with that classification on the file server.<br></li><li data-line="10"><strong>Folders By Property</strong>&nbsp;Similar to Files By Property, use this report to find out about folders based on a classification.<br></li><li data-line="12"><strong>Large Files</strong>&nbsp;This report allows you to find large files on the file server. By default, it finds files larger than 5 MB, but you can edit this setting to locate all files that are larger.<br></li><li data-line="14"><strong>Least Recently Accessed Files</strong>&nbsp;This report allows you to identify files that have not been accessed for a certain number of days. By default, this report identifies files that have not been accessed in the last 90 days, but you can configure this setting to any number that is appropriate for your organization.<br></li><li data-line="16"><strong>Most Recently Accessed Files</strong>&nbsp;Use this report to determine which files have been accessed most recently. The default version of this report finds files that have been accessed in the last seven days.<br></li><li data-line="18"><strong>Quota Usage</strong>&nbsp;Use this report to view how a user’s storage usage compares against the assigned quota. For example, you could run a report to determine which users have exceeded 90 percent of their quota.<br></li></ul></div><div><p>You can configure storage reports to run and then to be stored locally on file servers. You also have the option of configuring storage reports to be emailed to one or more email addresses. You can generate storage reports in DHTML, HTML, XML, CSV, and text formats.</p></div></div></div><div class="heading-wrapper"><h5 data-heading="File classification" class="heading" id="File_classification"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>File classification<div class="heading-after">...</div></h5><div class="heading-children"><div><p>File classification allows you to apply metadata to files based on file properties. For example, you can apply the tag Top_Secret to a file that has specific properties, such as who authored it and whether a particular string of characters appeared in the file.</p></div><div><p>The first step to take when configuring file classification is to configure classification properties. After you’ve done this, you can create a classification rule to assign the classification property to a file. You can also allow users to manually assign classification properties to a file. By specifying the values allowed, you limit which classification properties the user can assign.</p></div><div><p>You can configure the following file classification properties:</p></div><div><ul><li data-line="0"><strong>Yes/No</strong>&nbsp;Provide a Boolean value.<br></li><li data-line="2"><strong>Date-Time</strong>&nbsp;Provide a date and time.<br></li><li data-line="4"><strong>Number</strong>&nbsp;Provide an integer value.<br></li><li data-line="6"><strong>Multiple Choice List</strong>&nbsp;Allow multiple values to be assigned from a list.<br></li><li data-line="8"><strong>Ordered List</strong>&nbsp;Provide values in a specific order.<br></li><li data-line="10"><strong>Single Choice</strong>&nbsp;Select one of a selection of options.<br></li><li data-line="12"><strong>String</strong>&nbsp;Provide a text-based value.<br></li><li data-line="14"><strong>Multi-string</strong>&nbsp;Assign multiple text-based values.<br>You can configure classification rules to run against specific folders. You can also choose to recheck files each time the rule is run. That way, you can change a file’s classification in the event that the properties that triggered the initial classification change. When configuring reevaluation, you can also choose to remove user-assigned classification in case there is a conflict.</li></ul></div><div><p>File management tasks<br>File management tasks are automated tasks that FSRM performs on files according to a schedule. FSRM supports three types of file management tasks:</p></div><div><p>File Expiration This moves all files that match the conditions to a specific directory. The most common usage of a file expiration task is to move files that haven’t been accessed by anyone for a specific period, such as 365 days, to a specific directory.</p></div><div><p>Custom Allows you to run a specific executable against a file. You can specify which executable is to be run, any special arguments to be used when running the executable, and the service account permissions, which can be Local Service, Network Service, or Local System.</p></div><div><p>RMS Encryption Allows you to apply an RMS template or a set of file permissions to a file based on conditions. For example, you might want to automatically apply a specific set of file permissions to a file that has the Top_Secret classification or apply a specific RMS template to a file that has the Ultra_Secret classification.</p></div><div><p>When configuring a file management task, you also need to provide the following information:</p></div><div><p>Scope The path where the task is run.</p></div><div><p>Notification Any notification settings that you want to configure, such as sending an email, running a command, or writing an event to an event log. With file expiration, you can configure an email to be sent to each user who has files that are subject to the expiration task.</p></div><div><p>Report Generating a report each time that the task is run. A notification is sent to the user who owns the file, and reports are sent to administrators.</p></div><div><p>Schedule Specify when you want the file management task to be run.</p></div><div><p>Condition Specify the condition that triggers the management task.</p></div><div><p>Access-denied assistance<br>Access-denied assistance allows users to be informed why they don’t have access to a specific file. Access-denied assistance gives you the option of allowing the user to send an email message to the file owner so that the owner can, if appropriate, grant access to the file. You can configure access-denied assistance using FSRM or by configuring Group Policy. You configure access-denied assistance for a single server in FSRM by editing the FSRM options.</p></div><div><p>If you want to use access-denied assistance across all file servers in your organization, you can use Group Policy. To do so, edit the policies located in the Computer Configuration\Policies\Administrative Templates\System\Access-Denied Assistance node. This node contains the following policies:</p></div><div><p>Customize Message For Access Denied Errors Use this policy to specify the message users see when they are blocked from accessing a file.</p></div><div><p>Enable Access-Denied Assistance On Client For All File Types When enabled, access-denied assistance functions for all file types where the user is blocked from accessing the file.</p></div><div><p>Configure BranchCache<br>BranchCache speeds up access to files stored on shared folders that are accessed across medium-to high-latency WAN links. For example, suppose several users in a company’s Auckland, New Zealand branch office need to regularly access several files stored on a file server in the Sydney, Australia head office. The connection between the Auckland and Sydney office is low bandwidth and high latency. The files are also fairly large and need to be stored on the Sydney file server. Additionally, the Auckland branch office is too small for a Distributed File System (DFS) replica to make sense. In a scenario such as this, you would implement BranchCache.</p></div><div><p>BranchCache creates a locally cached copy of files from remote file servers that can be accessed by other computers on the local network, assuming the file hasn’t been updated at the source. In the example scenario, after one person in the Auckland office accesses the file, the next person to access the same file in the Auckland office accesses a copy that is cached locally, rather than retrieving it from the Sydney file server. The BranchCache process performs a check to verify that the cached version is up to date. If it isn’t, the updated file is retrieved and stored in the Auckland network’s BranchCache.</p></div><div><p>You add BranchCache to a file server by using the following PowerShell command:<br>]<br>Install-WindowsFeature FS-BranchCache</p></div><div><p>After installing BranchCache, you need to configure Group Policies that apply to file servers in your organization that allow them to support BranchCache. To do this, you need to configure the Hash Publication for BranchCache policy, located in the Computer Configuration\Policies\Administrative Templates\Network\Lanman Server node.</p></div><div><p>You have three options when configuring this policy:</p></div><div><ul><li data-line="0"><strong>Allow Hash Publication Only For Shared Folders On Which BranchCache is enabled</strong>&nbsp;This option allows you to selectively enable BranchCache.<br></li><li data-line="2"><strong>Disallow Hash Publication On All Shared Folders</strong>&nbsp;Use this option when you want to disable BranchCache.<br></li><li data-line="4"><strong>Allow Hash Publication For All Shared Folders</strong>&nbsp;Use this option if you want to enable BranchCache on all shared folders.<br></li></ul></div><div><p>Generally, there’s rarely a great reason not to enable BranchCache on all shared folders, but should you want to be selective, you do have that option. If you choose to be selective and only enable BranchCache on some shares, you need to edit the properties of the share and enable BranchCache. You do so by selecting Caching on the Advanced Sharing page and then using the Offline Settings options.</p></div><div><p>After you’ve configured your file server to support BranchCache, you need to configure client computers to support BranchCache. You do so by configuring Group Policy in the Computer Configuration\Policies\Administrative Templates\Network\BranchCache node of a GPO. Which policies you configure depends on how you want BranchCache to work at each branch office. You can choose between the following options:</p></div><div><ul><li data-line="0"><strong>Distributed Cache Mode</strong>&nbsp;When client computers are configured for Distributed Cache mode, each Windows 7 or later computer hosts part of the cache.<br></li><li data-line="2"><strong>Hosted Cache Mode</strong>&nbsp;When you configure Hosted Cache mode, a server at the branch office hosts the cache in its entirety. Any server running Windows Server 2008 R2 or later can function as a hosted cache mode server.</li></ul></div><div><p>To configure a branch office server to function as a hosted cache mode server, run the following PowerShell commands:</p></div><div><p>Install-WindowsFeature BranchCache<br>Start-Service BranchCache<br>Enable-BCHostedServer<br>Implement and configure Distributed File System<br>Distributed File System (DFS) has two advantages over a traditional file share. The first is that DFS automatically replicates to create copies of the file share and its content on one or more other servers. The second is that clients connect to a single UNC address, with the client directed to the closest server and redirected to the next closest server in the event that a server hosting a DFS replica fails. Azure File Sync provides most of the first functionality but does not provide the second functionality.</p></div><div><p>Using DFS, you can push a single shared folder structure out across an organization that has multiple branch offices. Changes made to files on one file share replica propagate across to the other file share replicas, with a robust and built-in conflict-management system present to ensure that problems do not occur when users are editing the same file at the same time.</p></div><div><p>DFS namespace<br>A DFS namespace is a collection of DFS shared folders. It uses the same UNC pathname structure, except instead of \ServerName\FileShareName with DFS, it is \domainname with all DFS shared folders located under this DFS root. For example, instead of</p></div><div><p>\FS-1\Engineering<br>\FS-2\Accounting<br>\FS-3\Documents<br>you could have</p></div><div><p>\Contoso.com\Engineering<br>\Contoso.com\Accounting<br>\Contoso.com\Documents<br>In this scenario, the Engineering, Accounting, and Documents folders could all be hosted on separate file servers and you could use a single namespace to locate those shared folders, rather than needing to know the identity of the file server that hosts them.</p></div><div><p>DFS supports the following types of namespaces:</p></div><div><p>Domain-Based Namespace Domain-based namespaces store configuration data in Active Directory. You deploy a domain-based namespace when you want to ensure that the namespace remains available even if one or more of the servers hosting the namespace goes offline.</p></div><div><p>Standalone Namespace Standalone namespaces have namespace data stored in the registry of a single server and not in Active Directory as is the case with domain-based namespaces. You can have only a single namespace server with a standalone namespace. Should the server that hosts the namespace fail, the entire namespace is unavailable even if servers that host individual folder targets remain online.</p></div><div><p>To create a DFS namespace, perform the following steps:</p></div><div><p>In the DFS console, select the Namespaces node. In the Action menu, select New Namespace.</p></div><div><p>On the Namespace Server page, select a server that has the DFS Namespaces feature installed. You can install this feature with the following PowerShell cmdlet:</p></div><div><ol><li data-line="0">Install-WindowsFeature FS-DFS-Namespace</li><li data-line="2">On the Namespace Name and Settings page, provide a meaningful name for the namespace. This is located under the domain name. For example, if you added the name Schematics and you were installing DFS in the contoso.internal domain, the namespace would end up as \contoso.internal\Schematics. By default, a shared folder is created on the namespace server, although you can edit settings on this page of the wizard and specify a separate location for the shared folder that hosts content you want to replicate.</li><li data-line="4">On the Namespace Type page, you should generally select domain-based namespace as this gives you the greatest flexibility and provides you with the option of adding additional namespace servers later on for redundancy.</li></ol></div><div><p>To add an additional namespace server to an existing namespace, ensure that the DFS Namespace role feature is installed on the server you want to add, and then perform the following steps:</p></div><div><ol><li data-line="0">In the DFS console, select the namespace to which you want to add the additional namespace server, and on the&nbsp;<strong>Action</strong>&nbsp;menu, select&nbsp;<strong>Add Namespace Server</strong>.</li><li data-line="2">On the Add Namespace Server page, specify the name of the namespace server, or browse and query Active Directory to verify that the name is correct, and then select OK. This creates a shared folder on the new namespace server with the name of the namespace.</li></ol></div></div></div><div class="heading-wrapper"><h5 data-heading="DFS replication" class="heading" id="DFS_replication"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>DFS replication<div class="heading-after">...</div></h5><div class="heading-children"><div><p>A replica is a copy of a DFS folder. Replication is the process that ensures each replica is kept up to date. DFS uses block-level replication, which means that only blocks in a file that have changed are transmitted to other replicas during the replication process.</p></div><div><p>You install the DFS replication feature by running the following PowerShell command:</p></div><div><p>Install-WindowsFeature FS-DFS-Replication<br>In the event that the same file is being edited by different users on different replicas, DFS uses a “last writer wins” conflict-resolution model. In the unlikely event that two separate users create files with the same name in the same location on different replicas at approximately the same time, conflict resolution uses “earliest creator wins.” When conflicts occur, files and folders that “lose” the conflict are moved to the Conflict and Deleted folder, located under the local path of the replicated folder in the DfsrPrivate\ConflictandDeleted directory.</p></div><div><p>Replicated folders and targets<br>One of the big advantages of DFS is that you can create copies of folders across multiple servers that are automatically updated. Each copy of that replica is called a folder target. Only computers that have the DFS replication role feature installed can host folder targets. A replicated folder can have multiple folder targets. For example, you might have a replicated folder named \contoso.com\Engineering that you have configured targets for in Sydney on \SYD-FS1\Engineering, Melbourne on \MEL-FS1\Engineering, and Auckland on \AKL-FS1\Engineering.</p></div><div><p>Replication topology<br>A replication group is a collection of servers that host copies of a replicated folder. When configuring replication for a replication group, you choose a topology and a primary member. The topology dictates how data replicates between the folders that each server hosts. The primary member is the seed from where file and folder data is replicated.</p></div><div><p>When creating a replication group, you can specify the following topologies:</p></div><div><p>Hub and Spoke This topology has hub members where data originates and spoke members to the location in which data is replicated. This topology also requires at least three members of the replication group. Choose this if you have a hub-and-spoke topology for your organizational WAN.</p></div><div><p>Full Mesh In this topology, each member of the replication group can replicate with other members. This is the simplest form of replication group and is suitable when each member can directly communicate with the others.</p></div><div><p>No Topology When you select this option, you can create a custom topology where you specify how each member replicates with others.</p></div><div><p>Replication schedules<br>You use replication schedules to determine how replication partners communicate with each other. You use a replication schedule to specify when replication partners communicate and whether replication traffic is throttled so that it doesn’t flood the network.</p></div><div><p>You can configure replication to occur continuously and specify bandwidth utilization, with a minimum value of 16 Kbps and an upper value of 256 Mbps, with the option of setting it to Unlimited. If necessary, you can also set different bandwidth limitations for different periods of the day.</p></div><div><p>Configure disks and volumes<br>In Windows Server, a disk is a physical device, which can be traditional magnetic storage, solid-state, or persistent memory device (also termed storage class memory). There are two types of disks available to Windows Server: basic disks and dynamic disks.</p></div><div><p>Basic disks<br>A basic disk is a disk that contains partitions that are generally formatted with a filesystem such as NTFS. Partitions are logical regions on a disk. A volume on a basic disk is a formatted partition. A basic disk using the Master Boot Record partition style can host as many as four partitions configured either as four primary partitions or three primary partitions and an extended partition. A basic disk formatted with the GUID Partition Table (GPT) style can have up to 128 primary partitions.</p></div><div><p>Primary partitions Each primary partition has a single logical volume. This volume can be formatted with a filesystem such as NTFS or ReFS.</p></div><div><p>Extended partitions Extended partitions are not formatted or assigned drive letters. Extended partitions can be divided into logical drives, which can in turn be used as formatted volumes.</p></div><div><p>You can perform the following operations on basic disks:</p></div><div><p>Create and delete primary and extended partitions.</p></div><div><p>Create and delete logical drives within an extended partition.</p></div><div><p>Format a partition and set it as active.</p></div><div><p>Dynamic disks<br>Dynamic disks allow you to create volumes that span multiple physical disks (as spanned and striped volumes) and to create fault-tolerant volumes (such as mirrored volumes and RAID-5 volumes). Dynamic disks support MBR and GPT partition styles. Dynamic disks were more commonly used in earlier versions of Windows Server, but most of the functionality of dynamic disks has been superseded by Storage Space</p></div><div><p>Partition styles<br>Windows Server supports two partition styles: MBR, which has been available since the early 1980s, and GPT, which has been available since the late 1990s. In addition to supporting up to 128 primary partitions, disks that use the GPT partition type support partitions and volumes that exceed 2 terabytes.</p></div><div><p>Configure and manage storage spaces<br>Storage spaces and storage pools were first introduced to Windows Server with the release of Windows Server 2012. A storage pool is a collection of storage devices that you can use to aggregate storage. You expand the capacity of a storage pool by adding storage devices to the pool. A storage space is a virtual disk that you create from the free space that is available in a storage pool. Depending on how you configure it, a storage space can be resilient to failure and have improved performance through storage tiering.</p></div><div><p>Storage pools<br>A storage pool is a collection of storage devices, usually disks, but can also include items such as virtual hard disks, from which you can create one or more storage spaces. A storage space is a special type of virtual disk that has the following features:</p></div><div><p>Resilient storage Configure to use disk mirroring or parity in the structure of the underlying storage (if available). We discuss resilience in a moment.</p></div><div><p>Tiering Configure to leverage a combination of SSD and HDD disks to achieve maximum performance</p></div><div><p>Continuous availability Storage spaces integrate with failover clustering, and you can cluster pools across separate nodes within a single failover cluster.</p></div><div><p>Write-back cache If a storage space includes SSDs, a write-back cache can be configured in the pool to buffer small random writes. These random writes are then later offloaded to SSDs or HDDs that make up the virtual disk in the pool.</p></div><div><p>Multitenancy You can configure access control lists on each storage pool. This allows you to configure isolation in multitenant scenarios.</p></div><div><p>Storage space resiliency<br>When creating a virtual disk on a storage pool that has enough disks, you can choose among several storage layouts. These layout options provide the following benefits:</p></div><div><p>Mirror Multiple copies of data are written across separate disks in the pool. This protects the virtual disk from failure of the physical disks that constitute the storage pool. Mirroring can be used with storage tiering. Depending on the number of disks in the pool, storage spaces provide two-way or three-way mirroring. Two-way mirroring writes two copies of data, and three-way mirroring writes three copies of data. Three-way mirroring provides better redundancy, but it also consumes more disk space.</p></div><div><p>Parity Parity data is stored on disks in the array that are separate from where data is stored. Parity provides greater capacity than using the Mirror option, but it has the drawback of slower write performance. Windows Server provides two types of parity: Single Parity and Dual Parity. Single Parity provides protection against one failure at a time. Dual Parity provides protection against two failures at a time. You need to have a minimum of three disks for Single Parity and a minimum of seven disks for Dual Parity. You get the option to select between Single Parity and Dual Parity when configuring storage layout when there are more than seven disks.</p></div><div><p>Simple This option provides no resiliency for the storage, which means that if one of the disks in the storage pool fails, the data on any virtual hard disks built from that pool will also be lost.</p></div><div><p>If you configure disks in the storage pool that use the Hot Spare option, storage spaces will be able to automatically repair virtual disks that use the Mirror or Parity resiliency options. It’s also possible for automatic repairs to occur if spare unallocated capacity exists within the pool.</p></div><div><p>Storage space tiering<br>Storage space tiering allows you to create a special type of virtual disk from a pool of storage that is a combination of SSD and traditional HDD disks. Storage tiering provides the virtual disk with performance similar to that of an array built out of SSD disks, but without the cost of building a large capacity array comprised of SSD disks. It accomplishes this by moving frequently accessed files to faster physical disks within the pool, thus moving less frequently accessed files to slower storage media.</p></div><div><p>You can only configure storage tiers when creating a virtual disk if there is a mixture of physical disks with the HDD and the SSD disk type in the pool upon which you want to create the disk. Once the disk is created, you cannot undo storage tiering from a virtual disk. You configure storage tiering for a virtual disk by selecting the Create Storage Tiers On This Virtual Disk option during virtual disk creation.</p></div><div><p>One challenge when configuring storage tiering is ensuring that you have media marked as SSD and HDD in the pool. While media will usually be recognized correctly, in some cases you must specify that a disk is of the SSD type, which allows storage tiering to be configured.</p></div><div><p>You can specify the disk media type using the following PowerShell procedure:</p></div><div><p>First determine the storage using the Get-StoragePool cmdlet.</p></div><div><p>To view whether physical disks are configured as SSD or HDD, use the Get-StoragePool cmdlet and then pipe that cmdlet to the Get-PhysicalDisk cmdlet. For example, to view the identity and media type of physical disks in the storage pool named Example-Pool, issue the command:</p></div><div><p>Get-StoragePool -FriendlyName ExamplePool | Get-PhysicalDisk | Select UniqueID,<br>MediaType, Usage</p></div><div><p>Once you have determined the UniqueIDs of the disks that you want to configure as the SSD type, you can configure a disk to have the SSD type by using the Set-PhysicalDisk cmdlet with the UniqueID parameter and the MediaType parameter set to SSD. Similarly, you can change the type back to HDD by setting the MediaType parameter to HDD.</p></div><div><p>Thin provisioning and trim<br>Thin provisioning allows you to create virtual disks where you specify a total size for the disk, but only the space that is actually used will be allocated. For example, with thin provisioning, you might create a virtual hard disk that can grow to 500 GB in size but is only currently 10 GB in size because only 10 GB of data is currently stored on the volumes hosted on the disk.</p></div><div><p>You can view the amount of space that has been allocated to a thin-provisioned virtual disk, and you can see the total capacity in the Virtual Disks area when the Storage Pools node is selected in the Server Manager console or in Windows Admin Center. When you create a virtual disk, the maximum disk size available is determined by the amount of free space on the physical disks that make up the storage pool, rather than the maximum capacity of the existing thin-provisioned disks. For example, if you have a storage pool with two 10 TB physical disks, you can create more than two thin-provisioned disks that have a maximum size of 10 TB. You can create thin-provisioned disks 10 TB in size as long as the actual allocated space on the storage pool doesn’t exceed 10 out of the 20 available. It is possible to create thin-provisioned disks in such a way that the total thin-provisioned disk capacity exceeds the storage capacity of the underlying storage pool. If you do overallocate space, you’ll need to monitor how much of the underlying storage pool capacity is consumed and add disks to the storage pool because that capacity is exhausted.</p></div><div><p>Trim is an automatic process that reclaims space when data is deleted from thin-provisioned disks. For example, if you have a 10 TB thin-provisioned virtual disk that stores 8 TB of data, 8 TB will be allocated from the storage pool that hosts that virtual disk. If you delete 2 TB of data from that thin-provisioned virtual disk, Trim ensures that the storage pool that hosts that virtual disk will be able to reclaim that unused space. The 10 TB thin-provisioned virtual disk will appear to be 10 TB in size, but after the trim process is complete, it will only consume 6 TB of space on the underlying storage pool. Trim is enabled by default.</p></div><div><p>Storage Spaces Direct<br>Storage Spaces Direct allows you to use Windows Server with locally attached storage to create highly available software-defined storage. Storage Spaces Direct (which uses the abbreviation S2D because the SSD abbreviation is already used for solid-state disks) provides a form of distributed, software-defined, shared-nothing storage that has similar characteristics to RAID in terms of performance and redundancy. S2D allows you to create volumes from a storage pool of physical drives that are attached to multiple nodes that participate in a Windows Server failover cluster. Storage Spaces Direct functions as a replacement for expensive large-scale hardware storage arrays.</p></div><div><p>Storage Spaces Direct has the following properties:</p></div><div><p>You can scale out by adding additional nodes to the cluster.</p></div><div><p>When you add a node to a cluster configured for Storage Spaces Direct, all eligible drives on the cluster node will be added to the Storage Spaces Direct pool.</p></div><div><p>You can have between 2 and 16 nodes in a Storage Spaces Direct failover cluster.</p></div><div><p>It requires each node to have at least two solid-state drives and at least four additional drives.</p></div><div><p>A cluster can have more than 400 drives and can support more than 4 petabytes of storage.</p></div><div><p>Storage Spaces Direct works with locally attached SATA, SAS, persistent memory, or NVMe drives.</p></div><div><p>Cache is automatically built from SSD media. All writes up to 256 KB and all reads up to 64 KB will be cached. Writes are then de-staged to HDD storage in optimal order.</p></div><div><p>Storage Spaces Direct volumes can be part mirror and part parity. To have a three-way mirror with dual parity, it is necessary to have four nodes in the Windows Server failover cluster that hosts Storage Spaces Direct.</p></div><div><p>If a disk fails, the plug-and-play replacement will automatically be added to the storage spaces pool when connected to the original cluster node.</p></div><div><p>A Storage Spaces Direct cluster can be configured with rack and chassis awareness as a way of further ensuring fault tolerance.</p></div><div><p>Storage Spaces Direct clusters are not supported where nodes span multiple sites.</p></div><div><p>While NTFS is supported for use with S2D clusters, ReFS is recommended.</p></div><div><p>S2D supports two deployment options:</p></div><div><p>Hyper-Converged With the Hyper-Converged deployment option, both storage and compute resources are deployed on the same cluster. This has the benefit of not requiring you to configure file server access and permissions and is most commonly used in small to medium-sized Hyper-V deployments.</p></div><div><p>Converged With the Converged (also known as disaggregated) deployment option, storage and compute resources are deployed in separate clusters. Often used with Hyper-V infrastructure-as-a-service (IaaS) deployments, a scale-out file server is deployed on S2D to provide network attached storage over SMB3 file shares. The compute resources for the IaaS virtual machines are located on a separate cluster from the S2D cluster.</p></div><div><p>Storage Spaces Direct in Windows Server supports nested resiliency. Nested resiliency is a capability designed for two-server S2D clusters that allows storage to remain available in the event of multiple hardware failures. When nested resiliency is configured, volumes can remain online and accessible even if one server goes offline and a drive fails. Nested resiliency only works when a cluster has two nodes. Nested resiliency requires a minimum of four capacity drives per server node and two cache drives per server node.</p></div><div><p>S2D resiliency types<br>S2D resiliency options are dependent on how many fault domains are present, the failure tolerance required, and the storage efficiency that can be achieved. A fault domain is a collection of hardware, such as a rack of servers, where a single failure can affect every component in that collection.</p></div><div><p>Configure and manage Storage Replica<br>Storage Replica allows you to replicate volumes between servers, including clusters, for the purposes of disaster recovery. You can also use Storage Replica to configure asynchronous replication to provision failover clusters that span two geographically disparate sites, while all nodes remain synchronized.</p></div><div><p>You can configure Storage Replica to support the following types of replication:</p></div><div><p>Synchronous Replication Use this when you want to mirror data and you have very low latency between the source and the destination. This allows you to create crash-consistent volumes. Synchronous replication ensures zero data loss at the filesystem level should a failure occur.</p></div><div><p>Asynchronous Replication Asynchronous Storage Replica is suitable when you want to replicate storage across sites where you are experiencing higher latencies.</p></div><div><p>Storage Replica is available for single volumes under 2 TB in the standard edition of Windows Server. These limits do not apply to the datacenter edition of the operating system. Participant servers must be members of the same Active Directory Domain Services forest.</p></div><div><p>Storage Replica operates at the partition layer. This means that it replicates all VSS snapshots created by the Windows Server operating system or by backup software that leverages VSS snapshot functionality.</p></div><div><p>Storage Replica has the following features:</p></div><div><p>Zero data loss, block-level replication When used with synchronous replication, there is no data loss. By leveraging block-level replication, even files that are locked will be replicated at the block level.</p></div><div><p>Guest and host Storage Replica works when Windows Server is a virtualized guest or when it functions as a host operating system. It is possible to replicate from third-party virtualization solutions to IaaS virtual machines hosted in the public cloud as long as Windows Server functions as the source and target operating system.</p></div><div><p>Supports manual failover with zero data loss You can perform manual failover when both the source and destination are online, or you can have failover occur automatically if the source storage fails.</p></div><div><p>Leverage SMB3 This allows Storage Replica to use multichannel, SMB Direct support on RoCE, iWARP, and InfiniBand RDMA network cards.</p></div><div><p>Encryption and authentication support Storage Replica supports packet signing, AES-128-GCM full data encryption, support for Intel AES-NI encryption acceleration, and Kerberos AES 256 authentication.</p></div><div><p>Initial seeding You can perform initial seeding by transferring data using a method other than Storage Replica between source and destination. This is especially useful when transferring large amounts of data between disparate sites where it may make more sense to use a courier to transport a high-capacity hard disk drive than it does to transmit data across a WAN link. The initial replication will then copy only blocks that have been changed since the replica data was exported from source to destination.</p></div><div><p>Consistency groups Consistency groups implement write ordering guarantees. This ensures that applications such as Microsoft SQL Server, which may write data to multiple replicated volumes, will have that data replicated so that it remains replicated sequentially in a consistent way.</p></div><div><p>Storage Replica is supported in the following configurations:</p></div><div><ul><li data-line="0"><strong>Server-to-server</strong>&nbsp;In this configuration, Storage Replica supports both synchronous and asynchronous replication between two standalone services. Local drives, storage spaces with shared SAS storage, SAN, and iSCSI-attached LUNs can be replicated. You can manage this configuration either using Server Manager or PowerShell. Failover can only be performed manually.<br></li><li data-line="2"><strong>Cluster-to-cluster</strong>&nbsp;In this configuration, replication occurs between two separate clusters. The first cluster might use Storage Spaces Direct, storage spaces with shared SAS storage, SAN, and iSCSI-attached LUNs. You manage this configuration using PowerShell and Azure Site Recovery. Failover must be performed manually.<br></li><li data-line="4"><strong>Stretch cluster</strong>&nbsp;A single cluster where nodes are located in geographically disparate sites. Some nodes share one set of asymmetric storage and other nodes share another set of asymmetric storage. Storage is replicated either synchronously or asynchronously, depending on bandwidth considerations. This scenario supports storage spaces with shared SAS storage, SAN, and iSCSI-attached LUNs. You manage this configuration using PowerShell and the Failover Cluster Manager GUI tool. This scenario allows for automated failover.<br></li></ul></div><div><p>The following configurations are not supported on Windows Server, though they may be supported at some point in the future:</p></div><div><ul><li data-line="0">Storage Replica only supports one-to-one replication in Windows Server. You cannot configure Storage Replica to support one-to-many replication or transitive replication. Transitive replication is where there is a replica of the replica server.<br></li><li data-line="2">Storage Replica on Windows Server does not support bringing a replicated volume online for read-only access in Windows Server 2016. In Windows Server 2019 and Windows Server 2022, you can perform a test failover and temporarily mount a snapshot of the replicated storage on an unused NTFS or ReFS formatted volume.<br></li><li data-line="4">Deploying scale-out file servers on stretch clusters participating in Storage Replica is not a supported configuration.<br></li><li data-line="6">Deploying Storage Spaces Direct in a stretch cluster with Storage Replica is not supported.<br></li></ul></div></div></div><div class="heading-wrapper"><h5 data-heading="Storage Replica requirements" class="heading" id="Storage_Replica_requirements"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Storage Replica requirements<div class="heading-after">...</div></h5><div class="heading-children"><div><p>Ensure that each server meets the following requirements:</p></div><div><ul><li data-line="0">The servers have two volumes, one volume hosting the data that you want to replicate, the other hosting the replication logs.<br></li><li data-line="2">Ensure that both log and data disks are formatted as GPT and not MBR.<br></li><li data-line="4">Data volume on the source and destination servers must be the same size and use the same sector sizes.<br></li><li data-line="6">Log volume on the source and destination volumes should be the same size and use the same sector sizes. The log volume should be a minimum of 9 GB in size.<br></li><li data-line="8">Ensure that the data volume does not contain the system volume, page file, or dump files.</li></ul></div><div><p>Use the Test-SRTopology cmdlet to verify that all Storage Replica requirements have been met. To do this, perform the following steps:</p></div><div><p>Create a temp directory on the source server that will store the Storage Replica Topology Report.</p></div><div><p>Make a note of the drive letters of the source storage and log volumes and destination storage and log volumes.</p></div><div><p>When the test completes, view the TestSrTopologyReport.html file to verify that your configuration meets Storage Replica requirements. Once you have verified that the configuration does meet requirements, you can use the New-SRPartnerShip cmdlet to create a Storage Replica partnership.</p></div><div><p>You can check the status of Storage Replica replication by running the Get-SRPartnership and Get-SRGroup cmdlets. Once Storage Replica is active, you won’t be able to access the replica storage device on the destination computer unless you reverse replication or remove replication. When you run this command, you will receive a warning that data loss may occur, and you will be asked whether you want to complete the operation.</p></div><div><p>By default, all replication when Storage Replica is configured is synchronous. You can switch between synchronous and asynchronous replication by using the Set-SRPartnership cmdlet with the ReplicationMode parameter.</p></div><div><p>Storage Replica uses the following ports:</p></div><div><p>445 Used for SMB, which is the replication transport protocol.</p></div><div><p>5985 Used for WSManHTTP, which is the management protocol for WMI/CIM/PowerShell.</p></div><div><p>5445 Used for SMB with iWARP. This port is only required if using iWARP RDMA networking.</p></div><div><p>Configure data deduplication<br>Deduplication works by analyzing files, locating the unique chunks of data that make up those files, and only storing one copy of each unique data chunk on the volume. (A chunk is a collection of storage blocks.) Deduplication can reduce the amount of storage consumed on the volume because when analyzed, it turns out that a substantial number of data chunks stored on a volume are identical. Rather than store multiple copies of the same identical chunk, deduplication ensures that one copy of the chunk is stored with placeholders in other locations pointing at the single copy of the chunk, rather than storing the chunk itself. Windows Server supports deduplication on both NTFS- and ReFS-formatted volumes. Before you can enable deduplication, you need to install the Data Deduplication role service.</p></div><div><p>When you configure deduplication, you choose from one of the following usage types:</p></div><div><p>General-Purpose File Server Appropriate for general-purpose file servers, optimization is performed on the background on any file that is older than three days. Files that are in use and partial files are not optimized.</p></div><div><p>Virtual Desktop Infrastructure (VDI) Server Appropriate for VDI servers, optimization is performed in the background on any file that is older than three days, but files that are in use and partial files will also be optimized.</p></div><div><p>Virtualized Backup Server This usage type is suitable for backup applications such as System Center Data Protection Manager or an Azure Backup Server. Performs priority optimization on files of any age. It will optimize in-use files, but it will not optimize partial files.</p></div><div><p>When configuring deduplication settings, you can configure files to be excluded on the basis of file extension, or you can exclude entire folders from data deduplication. Deduplication involves running a series of jobs</p></div><div><p>Name</p></div><div><p>Description</p></div><div><p>Schedule</p></div><div><p>Optimization</p></div><div><p>Deduplicates and optimizes the volume.</p></div><div><p>Once per hour</p></div><div><p>Garbage collection</p></div><div><p>Reclaims disk space by removing unnecessary chunks. You may want to run this job manually after deleting a substantial amount of data in an attempt to reclaim space by using the Start-DedupeJob cmdlet with the Type parameter set to GarbageCollection.</p></div><div><p>Every Saturday at 2:35 a.m.</p></div><div><p>Integrity scrubbing</p></div><div><p>Identifies corruption in the chunk store and uses volume features where possible to repair and reconstruct corrupted data.</p></div><div><p>Every Saturday at 3:35 a.m.</p></div><div><p>Unoptimization</p></div><div><p>A special job that you run manually when you want to disable deduplication for a volume.</p></div><div><p>Run manually</p></div><div><p>Configure Storage QoS<br>Storage Quality of Service (QoS) allows you to centrally manage and monitor the performance of storage used for virtual machines that leverage the Scale-Out File Server and Hyper-V roles. The Storage QoS feature will automatically ensure that access to storage resources is distributed equitably between virtual machines that use the same file server cluster. It allows you to configure minimum and maximum performance settings as policies in units of IOPS.</p></div><div><p>Storage QoS allows you to accomplish the following goals:</p></div><div><p>Reduce the impact of noisy neighbor VMs A noisy neighbor VM is a virtual machine that is consuming a disproportionate amount of storage resources. Storage QoS allows you to limit the extent to which such a VM can consume storage bandwidth.</p></div><div><p>Monitor storage performance When you deploy a virtual machine to a scale-out file server, you can review storage performance from a central location.</p></div><div><p>Allocate minimum and maximum available resources Through Storage QoS policies, you can specify minimum and maximum resources available. This allows you to ensure that each VM has the minimum storage performance it requires to run reserved for it.</p></div><div><p>There are two types of Storage QoS policy:</p></div><div><p>Aggregated An aggregated policy applies maximum and minimum values for a combined set of virtual hard disk files and virtual machines. For example, by creating an aggregated policy with a minimum of 150 IOPS and a maximum of 250 IOPS and applying it to three virtual hard disk files, you can ensure that the three virtual hard disk files will have a minimum of 150 IOPS between them when the system is under load and will consume a maximum of 250 IOPs when the virtual machines associated with those hard disks are heavily using storage.</p></div><div><p>Dedicated A dedicated policy applies a minimum and a maximum value to each individual virtual hard disk. For example, if you apply a dedicated policy to each of three virtual hard disks that specify a minimum of 150 IOPS and a maximum of 250 IOPS, each virtual hard disk will individually be able to use up to 250 IOPS, while having a minimum of 150 IOPS reserved for use if the system is under pressure.</p></div><div><p>You create policies with the New-StorageQosPolicy cmdlet, which is specified by using the PolicyType parameter if the policy is Dedicated or Aggregated; also, you must specify the minimum and maximum IOPS. For example, run this command to create a new policy called Alpha of the Dedicated type that has a minimum of 150 IOPS and a maximum of 250 IOPS:</p></div><div><p>New-StorageQosPolicy -Name Alpha -PolicyType Dedicated -MinimumIops 150 -MaximumIops 250</p></div></div></div></div></div><div class="heading-wrapper"><h4 data-heading="Configure filesystems" class="heading" id="Configure_filesystems"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configure filesystems<div class="heading-after">...</div></h4><div class="heading-children"><div><p>Windows Server supports the following filesystems:</p></div><div><ul><li data-line="0">NTFS<br></li><li data-line="2">ReFS<br></li><li data-line="4">FAT and FAT32<br></li></ul></div><div class="heading-wrapper"><h5 data-heading="NTFS" class="heading" id="NTFS"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>NTFS<div class="heading-after">...</div></h5><div class="heading-children"><div><p>NTFS is a filesystem that has been present in Windows Server environments since the 1990s.</p></div><div><p>In most cases you’ll use NTFS on a Windows Server system as it is the general-purpose filesystem and you’ll only have to think about ReFS for circumstances such as when you have to deal with the sorts of large files used by virtual machine hard disks or databases. Boot volumes on Windows Server computers always use NTFS and cannot use ReFS.</p></div><div><p>NTFS supports volumes up to 16 terabytes using the default cluster size of 4 KB and up to 256 terabytes using the maximum cluster size of 64 KB. Most scenarios that require such large volumes will be better served by using ReFS. ReFS is engineered to address shortcomings that NTFS had with file and disk sizes that would have been incomprehensible when the filesystem was first made available.</p></div><div><p>NTFS has the following permissions that can be applied to files and folders:</p></div><div><p>Full Control When applied to folders, allows the reading, writing, changing, and deletion of files and subfolders. When applied to a file, permits reading, writing, changing, and deletion of the file. Allows modification of permissions on files and folders.</p></div><div><p>Modify When applied to folders, allows the reading, writing, changing, and deletion of files and subfolders. When applied to a file, permits reading, writing, changing, and deleting the file. Does not allow the modification of permissions on files and folders.</p></div><div><p>Read &amp; Execute When applied to folders, allows the content of the folders to be accessed and executed. When applied to a file, allows the file to be accessed and executed.</p></div><div><p>List Folder Contents Can only be applied to folders. Allows the contents of the folder to be viewed.</p></div><div><p>Read When applied to folders, allows content to be accessed. When applied to a file, allows the contents to be accessed. Differs from Read &amp; Execute in that it does not allow files to be executed.</p></div><div><p>Write When applied to folders, allows adding of files and subfolders. When applied to a file, allows a user to modify, but not delete, a file.</p></div><div><p>ReFS<br>ReFS (Resilient File System) is a filesystem that is appropriate for very large workloads where you need to maximize data availability and integrity and ensure that the filesystem is resilient to corruption. The ReFS filesystem is suitable for hosting specific types of workloads such as virtual machines and SQL Server data, because it includes the following features that improve upon NTFS:</p></div><div><p>Integrity ReFS uses checksums for both metadata and file data. This means that ReFS can detect data corruption.</p></div><div><p>Storage spaces integration When integrated with storage spaces that are configured with Mirror or Parity options, ReFS has the ability to automatically detect and repair corruption using a secondary or tertiary copy of data stored by storage spaces. The repair occurs without downtime.</p></div><div><p>Proactive error correction ReFS includes a data integrity scanner that scans the volume to identify latent corruption and proactively repair corrupted data.</p></div><div><p>Scalability ReFS is specifically designed to support data sets in the petabyte range.</p></div><div><p>Advanced VM operations ReFS includes functionality specifically to support virtual machine operations. Block cloning accelerates copy operations, which accelerate VM checkpoint merges. Sparse VDL allows ReFS to substantially reduce the amount of time required to create very large fixed-size virtual hard disks.</p></div><div><p>It is important to note that ReFS is suitable only for hosting specific types of workloads. It isn’t suitable for many workloads used in small and medium enterprises that aren’t hosting large VMs or huge SQL Server databases. On computers running Windows Server 2022, ReFS supports the following features available in NTFS:</p></div><div><p>BitLocker encryption</p></div><div><p>Data deduplication</p></div><div><p>Cluster Shared Volume support</p></div><div><p>Junctions/soft links</p></div><div><p>Hard links</p></div><div><p>Failover cluster support</p></div><div><p>Access control lists</p></div><div><p>USN journal (Update Sequence Number Journal)</p></div><div><p>Changes notifications</p></div><div><p>Junction points</p></div><div><p>Mount points</p></div><div><p>Reparse points</p></div><div><p>Volume snapshots</p></div><div><p>File IDs</p></div><div><p>OpLock (opportunistic lock)</p></div><div><p>Sparse files</p></div><div><p>Named streams</p></div><div><p>Thin provisioning</p></div><div><p>Trim/Unmap</p></div><div><p>ReFS does not support File Server Resource Manager, file compression, file encryption, extended attributes, and quotas. ReFS does support block clone and file-level snapshots. ReFS volumes are also not bootable and cannot host the page file.</p></div><div><p>When used with Storage Spaces Direct, ReFS allows mirror-accelerated parity. Mirror-accelerated parity provides fault tolerance without impacting performance. To create a mirror-accelerated parity volume for use with Storage Spaces Direct, use the following PowerShell command:</p></div><div><p>New-Volume -FriendlyName "ExampleVolume" -filesystem CSVFS_ReFS -StoragePoolFriendlyName<br>"ExamplePool" -StorageTierFriendlyNames Performance, Capacity -StorageTierSizes 200GB,<br>800GB</p></div><div><p>You can use ReFSUtil, located in the %SystemRoot%\Windows\System32 folder, to recover data from ReFS volumes that have failed and are displayed as RAW in Disk Management. ReFS will identify files that can be recovered from a damaged ReFS volume and copy those files to another volume.</p></div><div><p>FAT and FAT32<br>Windows Server does support creating volumes that use the FAT and FAT32 filesystems. There are few circumstances where you would need to create a volume that uses these filesystems, but many removable storage devices use FAT32 and sometimes the simplest way to get files on and off a recalcitrant server is to copy them onto a convenient USB stick.</p></div></div></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Azure File Sync: Centralized Cloud Storage for File Services" class="heading" id="Azure_File_Sync:_Centralized_Cloud_Storage_for_File_Services"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Azure File Sync: Centralized Cloud Storage for File Services<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Introduction to Azure File Sync" class="heading" id="Introduction_to_Azure_File_Sync"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Introduction to Azure File Sync<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Azure File Sync elevates traditional file services by centralizing storage in the cloud, offering benefits like high Service Level Agreements (SLAs) and redundancy. This setup connects headquarters (HQ) and branch offices directly to Azure for file services.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="Workflow and Benefits" class="heading" id="Workflow_and_Benefits"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Workflow and Benefits<div class="heading-after">...</div></h3><div class="heading-children"><div><ol><li data-line="0"><strong>Cloud-First File Storage</strong>: Azure File Sync ensures that all files are synchronized to the Azure cloud by default.</li><li data-line="1"><strong>On-Premises Caching</strong>: Over time, the on-premises file server intelligently caches frequently used files, enhancing access speed.</li><li data-line="2"><strong>Archiving</strong>: Infrequently accessed or 'cold' data is archived solely in the Azure cloud, reducing on-premises storage requirements.</li></ol></div></div></div><div class="heading-wrapper"><h3 data-heading="Deployment Steps for Azure File Sync" class="heading" id="Deployment_Steps_for_Azure_File_Sync"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Deployment Steps for Azure File Sync<div class="heading-after">...</div></h3><div class="heading-children"><div class="heading-wrapper"><h4 data-heading="Pre-requisites" class="heading" id="Pre-requisites"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Pre-requisites<div class="heading-after">...</div></h4><div class="heading-children"><div><ol><li data-line="0"><strong>Azure File Storage and Azure File Sync Resources</strong>: These are foundational Azure services required for deployment.</li><li data-line="1"><strong>.NET Framework Compatibility</strong>: Ensure the presence of a .NET Framework version compatible with Azure File Sync.</li><li data-line="2"><strong>PowerShell Module</strong>: Install the Azure File Sync PowerShell module for configuration and management.</li><li data-line="3"><strong>Agent Installation</strong>: Install the Azure File Sync agent on the on-premises servers.</li><li data-line="4"><strong>Configuration on Azure</strong>: Set up Azure File Sync with specific directories and server synchronization settings.</li></ol></div></div></div><div class="heading-wrapper"><h4 data-heading="Creating Resources in Azure" class="heading" id="Creating_Resources_in_Azure"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Creating Resources in Azure<div class="heading-after">...</div></h4><div class="heading-children"><div><ol><li data-line="0"><strong>Resource Group</strong>: Create a new resource group for Azure File Sync, specifying the name and region.</li><li data-line="1"><strong>Storage Account</strong>:<ul><li data-line="2">Go to 'Storage Accounts' and create a new one.</li><li data-line="3">Use the previously created resource group.</li><li data-line="4">Specify the storage account name, region, performance tier (standard or premium), and redundancy option.</li></ul></li><li data-line="5"><strong>File Share Creation</strong>:<ul><li data-line="6">In the new storage account, navigate to 'File Shares'.</li><li data-line="7">Create a new file share, choosing a name and tier (Premium, Transaction Optimized, Hot, or Cool).</li></ul></li></ol></div></div></div><div class="heading-wrapper"><h4 data-heading="Azure File Sync Service Setup" class="heading" id="Azure_File_Sync_Service_Setup"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Azure File Sync Service Setup<div class="heading-after">...</div></h4><div class="heading-children"><div><ol><li data-line="0"><strong>Create Azure File Sync Resource</strong>: Search for Azure File Sync, create it using the earlier resource group, specify a name and region.</li></ol></div></div></div><div class="heading-wrapper"><h4 data-heading="Server Preparation" class="heading" id="Server_Preparation"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Server Preparation<div class="heading-after">...</div></h4><div class="heading-children"><div><ol><li data-line="0"><strong>Disable IE Enhanced Security Configuration</strong> in Server Manager.</li><li data-line="1"><strong>PowerShell Setup</strong>:<ul><li data-line="2">Run as administrator.</li><li data-line="3">Install necessary modules using <code>Install-Module az</code> and <code>install-module az sync</code>.</li></ul></li><li data-line="4"><strong>.NET Framework Verification</strong>: Confirm installation with <code>import module -name az.storagesync</code>.</li><li data-line="5"><strong>Compatibility Check</strong>: Use <code>invoke-azstoragesynccompatibilitycheck</code> to ensure no compatibility issues with file shares.</li></ol></div></div></div><div class="heading-wrapper"><h4 data-heading="Agent Installation and Configuration" class="heading" id="Agent_Installation_and_Configuration"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Agent Installation and Configuration<div class="heading-after">...</div></h4><div class="heading-children"><div><ol><li data-line="0"><strong>Download and Install</strong>: Obtain the Azure File Sync agent and install it with default settings.</li><li data-line="1"><strong>Azure Login and Setup</strong>: Log in with Azure account details and select the subscription, resource group, and storage sync service.</li></ol></div></div></div><div class="heading-wrapper"><h4 data-heading="Finalizing Azure File Sync Configuration" class="heading" id="Finalizing_Azure_File_Sync_Configuration"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Finalizing Azure File Sync Configuration<div class="heading-after">...</div></h4><div class="heading-children"><div><ol><li data-line="0"><strong>Registered Servers</strong>: In Azure, under the storage sync service resource, the on-premises server should be listed under 'Registered Servers'.</li><li data-line="1"><strong>Sync Group Creation</strong>:<ul><li data-line="2">In the Azure File Sync service, create a new sync group.</li><li data-line="3">Specify the sync group name, storage account, and Azure file share.</li></ul></li><li data-line="4"><strong>Server Endpoint Configuration</strong>:<ul><li data-line="5">In the sync group, add a server endpoint.</li><li data-line="6">Specify the path to the on-premises shared folder.</li><li data-line="7">Configure cloud tiering with volume free space policy and data policy based on file access or modification frequency.</li></ul></li></ol></div></div></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Overview of File Shares in Enterprise Environments" class="heading" id="Overview_of_File_Shares_in_Enterprise_Environments"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Overview of File Shares in Enterprise Environments<div class="heading-after">...</div></h2><div class="heading-children"><div><p>File shares serve as a centralized location for data storage, enabling client systems throughout an enterprise to access shared data efficiently. This system offers significant advantages in terms of hardware utilization and data management.</p></div></div></div><div class="heading-wrapper"><h2 data-heading="Client System Requirements and Storage Server Configuration" class="heading" id="Client_System_Requirements_and_Storage_Server_Configuration"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Client System Requirements and Storage Server Configuration<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Basic Hardware for Client Systems" class="heading" id="Basic_Hardware_for_Client_Systems"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Basic Hardware for Client Systems<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Client systems in a file share environment typically require only basic hardware components, particularly in terms of storage. The bulk of storage responsibilities are handled by the storage server, reducing the need for extensive storage capabilities on individual client machines.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="High Availability through RAID Arrays" class="heading" id="High_Availability_through_RAID_Arrays"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>High Availability through RAID Arrays<div class="heading-after">...</div></h3><div class="heading-children"><div><p>The storage server is equipped to handle high volumes of data and ensures high availability. This is achieved through the implementation of multiple hard disks configured in a RAID (Redundant Array of Independent Disks) array. RAID configurations enhance data protection and ensure continuous data availability, even in the event of a hard disk failure.</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Implementation of User Profiles" class="heading" id="Implementation_of_User_Profiles"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Implementation of User Profiles<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Definition and Access Control" class="heading" id="Definition_and_Access_Control"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Definition and Access Control<div class="heading-after">...</div></h3><div class="heading-children"><div><p>User profiles in a file share environment are defined to specify individual user settings and data, including desktop, downloads, documents, pictures, videos, and music folders. These profiles are unique to each user, and access is restricted so that no other user can view another's personal files and settings.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="Redirection through Group Policy Objects (GPO)" class="heading" id="Redirection_through_Group_Policy_Objects_(GPO)"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Redirection through Group Policy Objects (GPO)<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Administrators can use Group Policy Objects (GPO) to automatically redirect user profiles to be stored on the storage server. This ensures that user-specific data and settings are centrally managed and backed up, providing both convenience and security.</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Department Shares for Specific Groups" class="heading" id="Department_Shares_for_Specific_Groups"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Department Shares for Specific Groups<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Purpose and Accessibility" class="heading" id="Purpose_and_Accessibility"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Purpose and Accessibility<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Department shares are tailored to the needs of specific groups within an organization, such as IT or HR departments. These shares contain resources and files pertinent to the respective department.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="GPO-Driven Mapped Network Drives" class="heading" id="GPO-Driven_Mapped_Network_Drives"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>GPO-Driven Mapped Network Drives<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Through the use of GPOs, users logging into their accounts can automatically see a drive mapped specifically to their department. This mapped network drive points to a dedicated folder on the storage server, ensuring that department-specific resources are easily accessible to authorized personnel.</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Introduction to Distributed File System (DFS) in Enterprise Networks" class="heading" id="Introduction_to_Distributed_File_System_(DFS)_in_Enterprise_Networks"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Introduction to Distributed File System (DFS) in Enterprise Networks<div class="heading-after">...</div></h2><div class="heading-children"><div><p>Distributed File System (DFS) is a technology that greatly simplifies file sharing in complex enterprise networks with multiple file servers. It provides a unified namespace for file shares across different servers, making it easier for users to access files without needing to know the exact physical server location.</p></div></div></div><div class="heading-wrapper"><h2 data-heading="DFS Namespaces and Logical Fileshare Aggregation" class="heading" id="DFS_Namespaces_and_Logical_Fileshare_Aggregation"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>DFS Namespaces and Logical Fileshare Aggregation<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Creating Logical Fileshares" class="heading" id="Creating_Logical_Fileshares"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Creating Logical Fileshares<div class="heading-after">...</div></h3><div class="heading-children"><div><p>DFS Namespaces allow for the creation of a logical fileshare that aggregates multiple file shares from different servers. This system can even be mapped to a network drive, making it transparent to the end user that they are accessing files hosted on multiple servers.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="Example of DFS Namespace Implementation" class="heading" id="Example_of_DFS_Namespace_Implementation"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Example of DFS Namespace Implementation<div class="heading-after">...</div></h3><div class="heading-children"><div><p>Consider an example where there are three servers each hosting an "IT" file share. These can be consolidated into a centralized DFS namespace called "ITHQ." This namespace, in reality, redirects users to the file share geographically closest to them.</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="DFS Replication and Full Deployment" class="heading" id="DFS_Replication_and_Full_Deployment"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>DFS Replication and Full Deployment<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Role of DFS Replication" class="heading" id="Role_of_DFS_Replication"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Role of DFS Replication<div class="heading-after">...</div></h3><div class="heading-children"><div><p>If DFS replication is enabled, it will synchronize changes across all file share servers. A full DFS deployment involves both the namespaces and replication roles.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="Best Practices for Namespace Server" class="heading" id="Best_Practices_for_Namespace_Server"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Best Practices for Namespace Server<div class="heading-after">...</div></h3><div class="heading-children"><div><p>It's recommended to have a dedicated server to act as the namespace server. This specialization ensures efficient management and performance of the DFS system.</p></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Setting Up DFS Namespaces and Replication" class="heading" id="Setting_Up_DFS_Namespaces_and_Replication"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Setting Up DFS Namespaces and Replication<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Installing DFS Namespace Role" class="heading" id="Installing_DFS_Namespace_Role"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Installing DFS Namespace Role<div class="heading-after">...</div></h3><div class="heading-children"><div><ol><li data-line="0">Install the namespace role through Server Manager under File and Storage Services as DFS Namespaces.</li></ol></div></div></div><div class="heading-wrapper"><h3 data-heading="Setting Up DFS Replication" class="heading" id="Setting_Up_DFS_Replication"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Setting Up DFS Replication<div class="heading-after">...</div></h3><div class="heading-children"><div><ol><li data-line="0">On file share servers not hosting the namespace, install DFS Replication.</li><li data-line="1">Access DFS Management under Server Manager, and create a new namespace.</li><li data-line="2">Specify the server and the name for the namespace, choosing between domain-based or standalone namespace options.</li><li data-line="3">Under namespaces, add new folders to the namespace and link them to the shares on file servers.</li><li data-line="4">Configure a replication group, if necessary.</li></ol></div></div></div><div class="heading-wrapper"><h3 data-heading="Configuring DFS Replication Group" class="heading" id="Configuring_DFS_Replication_Group"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configuring DFS Replication Group<div class="heading-after">...</div></h3><div class="heading-children"><div><ol><li data-line="0">Create a new replication group in DFS Management.</li><li data-line="1">Choose between multipurpose replication or replication for data collection.</li><li data-line="2">Specify the replication group members (the file share servers).</li><li data-line="3">Choose the replication topology (full mesh or hub and spoke).</li><li data-line="4">Set replication schedules and bandwidth options.</li><li data-line="5">Choose a primary member/server and select folders to replicate.</li><li data-line="6">Apply existing NTFS permissions or set custom ones.</li><li data-line="7">Repeat these steps on other file servers.</li></ol></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="High Availability and Failover for DFS Namespaces" class="heading" id="High_Availability_and_Failover_for_DFS_Namespaces"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>High Availability and Failover for DFS Namespaces<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Configuring Failover" class="heading" id="Configuring_Failover"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configuring Failover<div class="heading-after">...</div></h3><div class="heading-children"><div><ol><li data-line="0">Install DFS namespaces role on a backup server.</li><li data-line="1">In DFS Management, add the namespace to display and specify the existing namespace's domain.</li><li data-line="2">Add the new backup namespace server to the discovered namespace server.</li><li data-line="3">DNS failover requires Active Directory integration for the namespace.</li></ol></div></div></div></div></div><div class="heading-wrapper"><h2 data-heading="Using AD Sites and Services for Optimal File Share Path" class="heading" id="Using_AD_Sites_and_Services_for_Optimal_File_Share_Path"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Using AD Sites and Services for Optimal File Share Path<div class="heading-after">...</div></h2><div class="heading-children"><div><p>AD Sites and Services is utilized to determine the most efficient path to a file share. In DFS Management, under the properties of a shared folder, the referrals tab allows for specifying how long clients cache referrals on local servers.</p></div></div></div><div class="heading-wrapper"><h2 data-heading="Implementing BranchCache for Efficient Data Access" class="heading" id="Implementing_BranchCache_for_Efficient_Data_Access"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Implementing BranchCache for Efficient Data Access<div class="heading-after">...</div></h2><div class="heading-children"><div class="heading-wrapper"><h3 data-heading="Purpose of BranchCache" class="heading" id="Purpose_of_BranchCache"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Purpose of BranchCache<div class="heading-after">...</div></h3><div class="heading-children"><div><p>BranchCache is designed to cache data from file servers or applications locally on caching servers or client devices. This significantly reduces network usage, especially over WAN links.</p></div></div></div><div class="heading-wrapper"><h3 data-heading="Setting Up BranchCache on a File/Content Server" class="heading" id="Setting_Up_BranchCache_on_a_File/Content_Server"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Setting Up BranchCache on a File/Content Server<div class="heading-after">...</div></h3><div class="heading-children"><div><ol><li data-line="0">Install the BranchCache for network files role through Server Manager under File and iSCSI services.</li><li data-line="1">Enable BranchCache on the shared folder through properties and advanced sharing settings.</li></ol></div></div></div><div class="heading-wrapper"><h3 data-heading="Creating a Caching Server" class="heading" id="Creating_a_Caching_Server"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Creating a Caching Server<div class="heading-after">...</div></h3><div class="heading-children"><div><ol><li data-line="0">On the caching server, install the BranchCache feature.</li><li data-line="1">Use PowerShell to run <code>Enable-BCHostedServer -RegisterSCP</code>.</li></ol></div></div></div><div class="heading-wrapper"><h3 data-heading="Configuring BranchCache via Group Policy" class="heading" id="Configuring_BranchCache_via_Group_Policy"><div class="heading-before"></div><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle" style="width:24px;max-width:100%"><path d="M3 8L12 17L21 8"></path></svg></div>Configuring BranchCache via Group Policy<div class="heading-after">...</div></h3><div class="heading-children"><div><ol><li data-line="0">Edit the default domain policy in Group Policy Management.</li><li data-line="1">Enable hash publication for BranchCache under the network settings.</li><li data-line="2">Enable BranchCache and specify the hosted cache mode and server name.</li><li data-line="3">Enable automatic hosted cache discovery by server connection policy.</li><li data-line="4">Perform a group policy update across all client computers.</li></ol></div><div><p>A hard disk is made of cricular tracks and each track is made up of sectors, multiple sectors are called a cluster. Windows has am inimum allocation size even if it the file size is smaller, if smaller files are constnatly being stored this can cause inefficient usage of storage/wastage, on the otherhand if large files are being stored constnatly and the allocation size is too small thne alot of sectors will have to be read which increases read time. This is why allocation unit sizes are depdnent on the type of data yo uare storing on the disk. In disk management you must first initalize, you must first clcik on it and choose online, then you must click on it and initalize the disk using a partition GPT or MBR, right click on unallocated space and create a volume and specify the volume size,assign a drive letter, you cna then format the hard drive (choose the file sstem such as NTFS or REFS which is optimized for Hyper V - VHDXs, and then specify the allocation unit size) and specify a volume label</p></div><div><p>Go to Server Manager -&gt; Storage Pools-&gt; Tasks -&gt; new storage pool -&gt; specify name and sppecify server/s the disks will be avaible lto - &gt; Specify the physical disks to add to the storage pool then clcikc create. On storage pool right click on empty space and click crreat new virtual disk -&gt; specify a nameand choose if you want to create storage tiers -&gt; specify if you want enclosure awareness (this copies data on seperate storage enclosures for failover), then specify storage layout, simple data (data is just stored noramlly no redundancy) or mirror where data is stripped across physical disks which creates copies of the data but reduces capcity or parity which is akin to raid 5 and creats parity data that can rebuild the array if one drive is lost, specify the provisioning type - thin( this means its not limited to the size currently available on the physical disks, u can then add the requrie d storage later ) or fixed. Then you can create a new volume with the size, file formatting etc.</p></div><div><p>data depulication finds duplications of data nad transforms them into chunks of data and points copies of the data to the chunk, this is useful for reducing wastege of sotrage space especially in ebackup scenarios. Data duplication optimizes storage capabilitiesevery 1 hour, it also performs garbage collection 1 week (it checks if the chunks are still necessary etc), integrity scrubbing (checks for data corruption) is done 1 week, it can also do unoptimization through user command. When runnign deduplciation yo umust choose a workload: general purpose 9usually for file servres), virtualization (hyper-v/VDI etc) , Backups.</p></div><div><p>Add the Data duplication service role under File and storage services -&gt; file and iCSCI services in server manager<br>Server Manager -&gt; File and Storage Services -&gt; right click on the volume and click configure data duplication -&gt; choose the the workload , specify how old the file has to be before it is deduplicated, you can then specify file extensinos that can be excluded from data duplication or specific folders, you can also specify deduplication schedule</p></div><div><p>storage replica allows volumes to be replicated from one server to another. It replicates at the block level whichi s below the file level</p></div><div><p>When the volume is replicated, u can choose from sync or async in synchrnous, when data is written from server 1 to server 2, server 2 must report back to validate, async forgoes this validaiton in return for speed and latenc y is less of an issue. Sotorage replica is fabric agnostic, it doesn't matter if its using ISCSI or storagee spaces etc . To implement storage replica you mustatlaeast 2 volumes in the servers, one is tthe log drive and the other is the replica drive. The log volume size must match the log volume size in the other server, same goes for the replica volume. The servers msut be domain joined.</p></div><div><p>First stpe is to install storage replica feature using <code>Install-WindowsFeature -Name Storage-replica,FS-FileServer -IncludeManagementTools -restart</code> command run it on both servers.</p></div><div><p>First we need to test the potential partnership to make sure it works by using the command: <span alt="PowerShell > Test Storage Replica" src="PowerShell#Test Storage Replica" class="internal-embed markdown-embed inline-embed is-loaded"></span></p><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div><br>To create the storage replica we use the following command: <span alt="PowerShell > Create Storage Replica" src="PowerShell#Create Storage Replica" class="internal-embed markdown-embed inline-embed is-loaded"><div class="embed-title markdown-embed-title"></div><div class="markdown-embed-content node-insert-event"><div class="markdown-preview-view markdown-rendered node-insert-event show-indentation-guide allow-fold-headings allow-fold-lists"><div class="markdown-preview-sizer markdown-preview-section" style="padding-bottom:0"><div class="markdown-preview-pusher" style="width:1px;height:.1px;margin-bottom:0"></div></div></div></div><div class="markdown-embed-content node-insert-event" style="display:none"></div><div class="markdown-embed-link" aria-label="Open link"><svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-link" style="width:24px;max-width:100%"><path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path></svg></div></span><p></p></div><div class="mod-footer"></div></div></div></div></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-gutter"><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-container"><div class="sidebar-sizer"><div class="sidebar-content-positioner"><div class="sidebar-content"><div class="tree-container outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area"><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Theory"><span class="tree-item-title"><p>Theory</p></span></a></div><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configure_Windows_Server_file_share_access"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Configure Windows Server file share access</p></span></a></div><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Understanding_File_Systems"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Understanding File Systems</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Definition_and_Role_of_a_File_System"><span class="tree-item-title"><p>Definition and Role of a File System</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Components_of_Windows_File_Systems"><span class="tree-item-title"><p>Components of Windows File Systems</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Windows_Server_File_System_Types"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Windows Server File System Types</p></span></a></div><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#File_Allocation_Table_(FAT)_Variants"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>File Allocation Table (FAT) Variants</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="6"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#FAT,_FAT32,_and_exFAT_Overview"><span class="tree-item-title"><p>FAT, FAT32, and exFAT Overview</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="6"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Limitations_and_Applications"><span class="tree-item-title"><p>Limitations and Applications</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#NT_File_System_(NTFS)"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>NT File System (NTFS)</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Characteristics_and_Benefits"><span class="tree-item-title"><p>Characteristics and Benefits</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Resilient_File_System_(ReFS)"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Resilient File System (ReFS)</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Introduction_and_Advantages"><span class="tree-item-title"><p>Introduction and Advantages</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Limitations_and_Recommended_Usage"><span class="tree-item-title"><p>Limitations and Recommended Usage</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Disk_Formatting:_Sectors_and_Allocation_Units"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Disk Formatting: Sectors and Allocation Units</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Understanding_Sectors"><span class="tree-item-title"><p>Understanding Sectors</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Allocation_Units_Explained"><span class="tree-item-title"><p>Allocation Units Explained</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Optimal_Allocation_Unit_Size"><span class="tree-item-title"><p>Optimal Allocation Unit Size</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Shared_Folders"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Shared Folders</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Overview_of_Shared_Folders"><span class="tree-item-title"><p>Overview of Shared Folders</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Role_of_Permissions_in_Shared_Folders"><span class="tree-item-title"><p>Role of Permissions in Shared Folders</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Applying_Share_and_File_System_Permissions"><span class="tree-item-title"><p>Applying Share and File System Permissions</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Handling_Multiple_Group_Memberships"><span class="tree-item-title"><p>Handling Multiple Group Memberships</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Methods_for_Creating_and_Managing_Shared_Folders"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Methods for Creating and Managing Shared Folders</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Using_File_Explorer_for_Sharing"><span class="tree-item-title"><p>Using File Explorer for Sharing</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Additional_Configuration_Options"><span class="tree-item-title"><p>Additional Configuration Options</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Utilizing_Windows_Admin_Center_(WAC)"><span class="tree-item-title"><p>Utilizing Windows Admin Center (WAC)</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Managing_Shares_with_Server_Manager"><span class="tree-item-title"><p>Managing Shares with Server Manager</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#File_Server_Resource_Manager_Integration"><span class="tree-item-title"><p>File Server Resource Manager Integration</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Methods_of_Deploying_a_File_Share"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Methods of Deploying a File Share</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Method_1:_Using_File_Explorer"><span class="tree-item-title"><p>Method 1: Using File Explorer</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Method_2:_Using_Server_Manager"><span class="tree-item-title"><p>Method 2: Using Server Manager</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#NTFS_Permissions_Inheritance"><span class="tree-item-title"><p>NTFS Permissions Inheritance</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configuring_File_Shares_through_PowerShell"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Configuring File Shares through PowerShell</p></span></a></div><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#File_Server_Resource_Manager_(FSRM)"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>File Server Resource Manager (FSRM)</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Role_and_Features_of_FSRM"><span class="tree-item-title"><p>Role and Features of FSRM</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Managing_FSRM"><span class="tree-item-title"><p>Managing FSRM</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Server_Message_Block_(SMB)_Protocol_Overview"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Server Message Block (SMB) Protocol Overview</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Introduction_to_SMB"><span class="tree-item-title"><p>Introduction to SMB</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Evolution_of_the_SMB_Protocol"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Evolution of the SMB Protocol</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#SMB_1.0:_The_Beginning"><span class="tree-item-title"><p>SMB 1.0: The Beginning</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#SMB_2.0:_Performance_Improvements"><span class="tree-item-title"><p>SMB 2.0: Performance Improvements</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#SMB_3.0:_Advanced_Features_and_Security"><span class="tree-item-title"><p>SMB 3.0: Advanced Features and Security</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#SMB_3.1.1:_Further_Enhancements"><span class="tree-item-title"><p>SMB 3.1.1: Further Enhancements</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Common_Use_Cases_of_SMB_3.x_Enhancements"><span class="tree-item-title"><p>Common Use Cases of SMB 3.x Enhancements</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Understanding_Volume_Shadow_Copy_Service_(VSS)"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Understanding Volume Shadow Copy Service (VSS)</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Role_of_VSS_in_Data_Backup"><span class="tree-item-title"><p>Role of VSS in Data Backup</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#VSS_Components_and_Functions"><span class="tree-item-title"><p>VSS Components and Functions</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#SMB_Integration_and_VSS"><span class="tree-item-title"><p>SMB Integration and VSS</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Overview_of_BranchCache"><span class="tree-item-title"><p>Overview of BranchCache</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configuring_BranchCache_Using_Group_Policies"><span class="tree-item-title"><p>Configuring BranchCache Using Group Policies</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configuring_BranchCache_on_Client_Computers"><span class="tree-item-title"><p>Configuring BranchCache on Client Computers</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Understanding_Distributed_File_System_(DFS)"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Understanding Distributed File System (DFS)</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#DFS_Namespace"><span class="tree-item-title"><p>DFS Namespace</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#DFS_Replication"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>DFS Replication</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Replicated_Folders_and_Targets"><span class="tree-item-title"><p>Replicated Folders and Targets</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Replication_Topology"><span class="tree-item-title"><p>Replication Topology</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Replication_Schedules"><span class="tree-item-title"><p>Replication Schedules</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div><div class="tree-item" data-depth="1"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configuration"><span class="tree-item-title"><p>Configuration</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configuring_Quota_Management_and_File_Screening"><span class="tree-item-title"><p>Configuring Quota Management and File Screening</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configure_Windows_Server_file_share_access"><span class="tree-item-title"><p>Configure Windows Server file share access</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configure_SMB_Security"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Configure SMB Security</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Create_Azure_File_Sync_Service"><span class="tree-item-title"><p>Create Azure File Sync Service</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Create_sync_groups"><span class="tree-item-title"><p>Create sync groups</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Create_cloud_endpoints"><span class="tree-item-title"><p>Create cloud endpoints</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Register_servers"><span class="tree-item-title"><p>Register servers</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Create_server_endpoints"><span class="tree-item-title"><p>Create server endpoints</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configure_cloud_tiering"><span class="tree-item-title"><p>Configure cloud tiering</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Monitor_File_Sync"><span class="tree-item-title"><p>Monitor File Sync</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Migrate_DFS_to_Azure_File_Sync"><span class="tree-item-title"><p>Migrate DFS to Azure File Sync</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#File_groups"><span class="tree-item-title"><p>File groups</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#File_screen_templates"><span class="tree-item-title"><p>File screen templates</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configure_File_Server_Resource_Manager_quotas"><span class="tree-item-title"><p>Configure File Server Resource Manager quotas</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Use_additional_FSRM_functionality"><span class="tree-item-title"><p>Use additional FSRM functionality</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Storage_reports"><span class="tree-item-title"><p>Storage reports</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#File_classification"><span class="tree-item-title"><p>File classification</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#DFS_replication"><span class="tree-item-title"><p>DFS replication</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Storage_Replica_requirements"><span class="tree-item-title"><p>Storage Replica requirements</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configure_filesystems"><span class="tree-item-title"><p>Configure filesystems</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="5"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#NTFS"><span class="tree-item-title"><p>NTFS</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Azure_File_Sync:_Centralized_Cloud_Storage_for_File_Services"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Azure File Sync: Centralized Cloud Storage for File Services</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Introduction_to_Azure_File_Sync"><span class="tree-item-title"><p>Introduction to Azure File Sync</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Workflow_and_Benefits"><span class="tree-item-title"><p>Workflow and Benefits</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Deployment_Steps_for_Azure_File_Sync"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Deployment Steps for Azure File Sync</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Pre-requisites"><span class="tree-item-title"><p>Pre-requisites</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Creating_Resources_in_Azure"><span class="tree-item-title"><p>Creating Resources in Azure</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Azure_File_Sync_Service_Setup"><span class="tree-item-title"><p>Azure File Sync Service Setup</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Server_Preparation"><span class="tree-item-title"><p>Server Preparation</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Agent_Installation_and_Configuration"><span class="tree-item-title"><p>Agent Installation and Configuration</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Finalizing_Azure_File_Sync_Configuration"><span class="tree-item-title"><p>Finalizing Azure File Sync Configuration</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Overview_of_File_Shares_in_Enterprise_Environments"><span class="tree-item-title"><p>Overview of File Shares in Enterprise Environments</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Client_System_Requirements_and_Storage_Server_Configuration"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Client System Requirements and Storage Server Configuration</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Basic_Hardware_for_Client_Systems"><span class="tree-item-title"><p>Basic Hardware for Client Systems</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#High_Availability_through_RAID_Arrays"><span class="tree-item-title"><p>High Availability through RAID Arrays</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Implementation_of_User_Profiles"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Implementation of User Profiles</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Definition_and_Access_Control"><span class="tree-item-title"><p>Definition and Access Control</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Redirection_through_Group_Policy_Objects_(GPO)"><span class="tree-item-title"><p>Redirection through Group Policy Objects (GPO)</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Department_Shares_for_Specific_Groups"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Department Shares for Specific Groups</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Purpose_and_Accessibility"><span class="tree-item-title"><p>Purpose and Accessibility</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#GPO-Driven_Mapped_Network_Drives"><span class="tree-item-title"><p>GPO-Driven Mapped Network Drives</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Introduction_to_Distributed_File_System_(DFS)_in_Enterprise_Networks"><span class="tree-item-title"><p>Introduction to Distributed File System (DFS) in Enterprise Networks</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#DFS_Namespaces_and_Logical_Fileshare_Aggregation"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>DFS Namespaces and Logical Fileshare Aggregation</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Creating_Logical_Fileshares"><span class="tree-item-title"><p>Creating Logical Fileshares</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Example_of_DFS_Namespace_Implementation"><span class="tree-item-title"><p>Example of DFS Namespace Implementation</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#DFS_Replication_and_Full_Deployment"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>DFS Replication and Full Deployment</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Role_of_DFS_Replication"><span class="tree-item-title"><p>Role of DFS Replication</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Best_Practices_for_Namespace_Server"><span class="tree-item-title"><p>Best Practices for Namespace Server</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Setting_Up_DFS_Namespaces_and_Replication"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Setting Up DFS Namespaces and Replication</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Installing_DFS_Namespace_Role"><span class="tree-item-title"><p>Installing DFS Namespace Role</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Setting_Up_DFS_Replication"><span class="tree-item-title"><p>Setting Up DFS Replication</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configuring_DFS_Replication_Group"><span class="tree-item-title"><p>Configuring DFS Replication Group</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#High_Availability_and_Failover_for_DFS_Namespaces"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>High Availability and Failover for DFS Namespaces</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configuring_Failover"><span class="tree-item-title"><p>Configuring Failover</p></span></a></div><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Using_AD_Sites_and_Services_for_Optimal_File_Share_Path"><span class="tree-item-title"><p>Using AD Sites and Services for Optimal File Share Path</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Implementing_BranchCache_for_Efficient_Data_Access"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span class="tree-item-title"><p>Implementing BranchCache for Efficient Data Access</p></span></a></div><div class="tree-item-children"><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Purpose_of_BranchCache"><span class="tree-item-title"><p>Purpose of BranchCache</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Setting_Up_BranchCache_on_a_File/Content_Server"><span class="tree-item-title"><p>Setting Up BranchCache on a File/Content Server</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Creating_a_Caching_Server"><span class="tree-item-title"><p>Creating a Caching Server</p></span></a></div><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><div class="tree-item-contents"><a class="internal-link tree-item-link" href="#Configuring_BranchCache_via_Group_Policy"><span class="tree-item-title"><p>Configuring BranchCache via Group Policy</p></span></a></div><div class="tree-item-children"></div></div></div></div></div></div></div></div></div></div></div></div></div></div></body></html>